<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Docker使用 | 编程随笔</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/img/logo.png">
    <link rel="stylesheet" href="//at.alicdn.com/t/font_3114978_qe0b39no76.css">
    <link rel="stylesheet" href="//at.alicdn.com/t/font_3077305_pt8umhrn4k9.css">
    <link rel="stylesheet" href="//at.alicdn.com/t/c/font_4397361_l7w8pg1gfn.css">
    <link rel="stylesheet" href="//at.alicdn.com/t/font_3114978_qe0b39no76.css">
    <meta name="description" content="编程随笔">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <meta name="keywords" content="编程随笔">
    <meta name="google" content="notranslate">
    <meta content="编程随笔" property="og:title">
    
    <link rel="preload" href="/assets/css/0.styles.079605d6.css" as="style"><link rel="preload" href="/assets/js/app.07bb8812.js" as="script"><link rel="preload" href="/assets/js/4.74e8e892.js" as="script"><link rel="preload" href="/assets/js/1.97c589b9.js" as="script"><link rel="preload" href="/assets/js/3.b578a44e.js" as="script"><link rel="preload" href="/assets/js/90.183556a5.js" as="script"><link rel="preload" href="/assets/js/25.7ae8a124.js" as="script"><link rel="preload" href="/assets/js/45.ffc06b3f.js" as="script"><link rel="prefetch" href="/assets/js/10.eaca31ce.js"><link rel="prefetch" href="/assets/js/100.c9d76c4c.js"><link rel="prefetch" href="/assets/js/101.88872e03.js"><link rel="prefetch" href="/assets/js/102.449a0d87.js"><link rel="prefetch" href="/assets/js/103.2b2dfb1d.js"><link rel="prefetch" href="/assets/js/104.da44320d.js"><link rel="prefetch" href="/assets/js/105.353bcbde.js"><link rel="prefetch" href="/assets/js/106.c19baf2c.js"><link rel="prefetch" href="/assets/js/107.646e774b.js"><link rel="prefetch" href="/assets/js/108.a0ad0522.js"><link rel="prefetch" href="/assets/js/109.36644a82.js"><link rel="prefetch" href="/assets/js/11.fa7f84da.js"><link rel="prefetch" href="/assets/js/110.381ba96a.js"><link rel="prefetch" href="/assets/js/111.65190d31.js"><link rel="prefetch" href="/assets/js/112.9fb8cad4.js"><link rel="prefetch" href="/assets/js/113.f66fd9e9.js"><link rel="prefetch" href="/assets/js/114.ab415b1d.js"><link rel="prefetch" href="/assets/js/115.d0871fd1.js"><link rel="prefetch" href="/assets/js/116.75fbf8d3.js"><link rel="prefetch" href="/assets/js/117.5a07f9c6.js"><link rel="prefetch" href="/assets/js/118.f08bda45.js"><link rel="prefetch" href="/assets/js/119.580d81c7.js"><link rel="prefetch" href="/assets/js/12.286e720b.js"><link rel="prefetch" href="/assets/js/120.145d9f9f.js"><link rel="prefetch" href="/assets/js/121.0022485a.js"><link rel="prefetch" href="/assets/js/122.1b4b2453.js"><link rel="prefetch" href="/assets/js/123.9978128c.js"><link rel="prefetch" href="/assets/js/124.12de337a.js"><link rel="prefetch" href="/assets/js/125.4e972cac.js"><link rel="prefetch" href="/assets/js/126.168fd1f0.js"><link rel="prefetch" href="/assets/js/127.9d8836c0.js"><link rel="prefetch" href="/assets/js/128.5b518250.js"><link rel="prefetch" href="/assets/js/129.20b5082f.js"><link rel="prefetch" href="/assets/js/13.a3d2613a.js"><link rel="prefetch" href="/assets/js/130.fa960896.js"><link rel="prefetch" href="/assets/js/131.f41ea89f.js"><link rel="prefetch" href="/assets/js/132.e0bf2579.js"><link rel="prefetch" href="/assets/js/133.a5d45049.js"><link rel="prefetch" href="/assets/js/134.d72292c2.js"><link rel="prefetch" href="/assets/js/135.dd93ec1c.js"><link rel="prefetch" href="/assets/js/136.e3ad7e25.js"><link rel="prefetch" href="/assets/js/137.f9e84991.js"><link rel="prefetch" href="/assets/js/138.4b6a2116.js"><link rel="prefetch" href="/assets/js/139.bece1a1a.js"><link rel="prefetch" href="/assets/js/14.2523f254.js"><link rel="prefetch" href="/assets/js/140.2ecaa63f.js"><link rel="prefetch" href="/assets/js/141.c23682ab.js"><link rel="prefetch" href="/assets/js/142.e0a218be.js"><link rel="prefetch" href="/assets/js/143.906f7a14.js"><link rel="prefetch" href="/assets/js/144.d2d7f909.js"><link rel="prefetch" href="/assets/js/15.97d23f34.js"><link rel="prefetch" href="/assets/js/16.fe48cd9f.js"><link rel="prefetch" href="/assets/js/17.c647e895.js"><link rel="prefetch" href="/assets/js/18.bb29e3c0.js"><link rel="prefetch" href="/assets/js/19.4a65e5c2.js"><link rel="prefetch" href="/assets/js/2.929fee14.js"><link rel="prefetch" href="/assets/js/20.a8904a46.js"><link rel="prefetch" href="/assets/js/21.d31c182f.js"><link rel="prefetch" href="/assets/js/22.b0579bd7.js"><link rel="prefetch" href="/assets/js/23.766900f6.js"><link rel="prefetch" href="/assets/js/24.0d74e9b4.js"><link rel="prefetch" href="/assets/js/26.f7942079.js"><link rel="prefetch" href="/assets/js/27.a2c1c35f.js"><link rel="prefetch" href="/assets/js/28.d3c83433.js"><link rel="prefetch" href="/assets/js/29.5b41a89f.js"><link rel="prefetch" href="/assets/js/30.672a095c.js"><link rel="prefetch" href="/assets/js/31.c2c6a59a.js"><link rel="prefetch" href="/assets/js/32.cfa71a3e.js"><link rel="prefetch" href="/assets/js/33.0f17b2e5.js"><link rel="prefetch" href="/assets/js/34.d19e3fd9.js"><link rel="prefetch" href="/assets/js/35.41aca4fc.js"><link rel="prefetch" href="/assets/js/36.643f1a9f.js"><link rel="prefetch" href="/assets/js/37.e41d0bdb.js"><link rel="prefetch" href="/assets/js/38.9a9626ba.js"><link rel="prefetch" href="/assets/js/39.4bc3ae67.js"><link rel="prefetch" href="/assets/js/40.3d80477f.js"><link rel="prefetch" href="/assets/js/41.742f2ea3.js"><link rel="prefetch" href="/assets/js/42.09421d53.js"><link rel="prefetch" href="/assets/js/43.fdc22fb2.js"><link rel="prefetch" href="/assets/js/44.7db26cd9.js"><link rel="prefetch" href="/assets/js/46.d9ecb6e7.js"><link rel="prefetch" href="/assets/js/47.327f69cd.js"><link rel="prefetch" href="/assets/js/48.5723d6c0.js"><link rel="prefetch" href="/assets/js/49.c24b15e8.js"><link rel="prefetch" href="/assets/js/5.4b977ede.js"><link rel="prefetch" href="/assets/js/50.6e5c47d3.js"><link rel="prefetch" href="/assets/js/51.e93ff978.js"><link rel="prefetch" href="/assets/js/52.740dc0f5.js"><link rel="prefetch" href="/assets/js/53.d5ac32fd.js"><link rel="prefetch" href="/assets/js/54.c882516a.js"><link rel="prefetch" href="/assets/js/55.050dc2da.js"><link rel="prefetch" href="/assets/js/56.fc916a6f.js"><link rel="prefetch" href="/assets/js/57.0d8e437d.js"><link rel="prefetch" href="/assets/js/58.d076a2f9.js"><link rel="prefetch" href="/assets/js/59.457605f8.js"><link rel="prefetch" href="/assets/js/6.4a6c1139.js"><link rel="prefetch" href="/assets/js/60.ed689bf9.js"><link rel="prefetch" href="/assets/js/61.d83a7b0f.js"><link rel="prefetch" href="/assets/js/62.4038d0b2.js"><link rel="prefetch" href="/assets/js/63.20bef585.js"><link rel="prefetch" href="/assets/js/64.7e4aa4ca.js"><link rel="prefetch" href="/assets/js/65.92a8cbc7.js"><link rel="prefetch" href="/assets/js/66.2cf7a64c.js"><link rel="prefetch" href="/assets/js/67.0a0f02ee.js"><link rel="prefetch" href="/assets/js/68.f78eb385.js"><link rel="prefetch" href="/assets/js/69.9a7aa5d2.js"><link rel="prefetch" href="/assets/js/7.08d66d13.js"><link rel="prefetch" href="/assets/js/70.d0e9b907.js"><link rel="prefetch" href="/assets/js/71.a0a2eccd.js"><link rel="prefetch" href="/assets/js/72.fc8048fc.js"><link rel="prefetch" href="/assets/js/73.43bc22b1.js"><link rel="prefetch" href="/assets/js/74.4a0b922a.js"><link rel="prefetch" href="/assets/js/75.09566fa0.js"><link rel="prefetch" href="/assets/js/76.a0165b69.js"><link rel="prefetch" href="/assets/js/77.5f7eb6fb.js"><link rel="prefetch" href="/assets/js/78.57de8cb0.js"><link rel="prefetch" href="/assets/js/79.5fde1141.js"><link rel="prefetch" href="/assets/js/80.15a35949.js"><link rel="prefetch" href="/assets/js/81.a9164e79.js"><link rel="prefetch" href="/assets/js/82.797aaa26.js"><link rel="prefetch" href="/assets/js/83.0783a693.js"><link rel="prefetch" href="/assets/js/84.631e99a8.js"><link rel="prefetch" href="/assets/js/85.d5c9a8a2.js"><link rel="prefetch" href="/assets/js/86.bb8b3aa9.js"><link rel="prefetch" href="/assets/js/87.6809a43c.js"><link rel="prefetch" href="/assets/js/88.1dc535b1.js"><link rel="prefetch" href="/assets/js/89.d987eb75.js"><link rel="prefetch" href="/assets/js/91.a5d7268f.js"><link rel="prefetch" href="/assets/js/92.64c9ecb9.js"><link rel="prefetch" href="/assets/js/93.4741d97d.js"><link rel="prefetch" href="/assets/js/94.26334787.js"><link rel="prefetch" href="/assets/js/95.fef8ad7e.js"><link rel="prefetch" href="/assets/js/96.ce5ca942.js"><link rel="prefetch" href="/assets/js/97.109e1872.js"><link rel="prefetch" href="/assets/js/98.b20cac2e.js"><link rel="prefetch" href="/assets/js/99.d48d7f99.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.cca524b3.js">
    <link rel="stylesheet" href="/assets/css/0.styles.079605d6.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="编程随笔" class="logo"> <span class="site-name can-hide">编程随笔</span></a> <div class="docsearch" style="width: calc(100% - 24rem)"><div><div id="docsearch"></div></div> <div class="links"><nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程" class="dropdown-title"><!----> <span class="title" style="display:;">编程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/7765ba/" class="nav-link">前端</a></li><li class="dropdown-item"><!----> <a href="/pages/17352a/" class="nav-link">后端</a></li><li class="dropdown-item"><!----> <a href="/pages/31c4d3/" class="nav-link">嵌入式</a></li><li class="dropdown-item"><!----> <a href="/pages/cf83bf/" class="nav-link">python</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目实战" class="dropdown-title"><!----> <span class="title" style="display:;">项目实战</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/7a1d12/" class="nav-link">星球项目</a></li><li class="dropdown-item"><!----> <a href="/pages/91eb9e/" class="nav-link">开源项目</a></li></ul></div></div><div class="nav-item"><a href="/pages/a5da02/" class="nav-link">工具类</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Github" class="dropdown-title"><!----> <span class="title" style="display:;">Github</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>项目仓库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/liyao52033/liyao52033.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  部署仓库
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/liyao52033/vuepress-default" target="_blank" rel="noopener noreferrer" class="nav-link external">
  代码仓库
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>vuepress插件</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/shanyuhai123/vuepress-plugin-auto-sidebar" target="_blank" rel="noopener noreferrer" class="nav-link external">
  自动生成导航栏与侧边栏
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/meilisearch/vuepress-plugin-meilisearch" target="_blank" rel="noopener noreferrer" class="nav-link external">
  全文搜索
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/lq782655835/vuepress-plugin-element-ui" target="_blank" rel="noopener noreferrer" class="nav-link external">
  选项卡
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/ekoeryanto/vuepress-plugin-sitemap" target="_blank" rel="noopener noreferrer" class="nav-link external">
  自动生成sitemap
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>自主开发插件</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/liyao52033/vuepress-plugin-editfrontmatter" target="_blank" rel="noopener noreferrer" class="nav-link external">
  批量操作frontmatter
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/liyao52033/vuepress-plugins/tree/main/vuepress-plugin-twikoo" target="_blank" rel="noopener noreferrer" class="nav-link external">
  评论系统
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/liyao52033/vuepress-plugin-replaceurl" target="_blank" rel="noopener noreferrer" class="nav-link external">
  链接美化
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/liyao52033/vuepress-plugins/tree/main/vuepress-plugin-blocktoggle" target="_blank" rel="noopener noreferrer" class="nav-link external">
  折叠代码块
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/liyao52033/vuepress-plugins/tree/main/vuepress-plugin-copycodeblock" target="_blank" rel="noopener noreferrer" class="nav-link external">
  复制代码块
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <!----></nav></div></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/avatar.png"> <div class="blogger-info"><h3>liyao52033</h3> <span>走运时，要想到倒霉，不要得意得过了头；倒霉时，要想到走运，不必垂头丧气。心态始终保持平衡，情绪始终保持稳定，此亦长寿之道</span></div></div> <nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程" class="dropdown-title"><!----> <span class="title" style="display:;">编程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/7765ba/" class="nav-link">前端</a></li><li class="dropdown-item"><!----> <a href="/pages/17352a/" class="nav-link">后端</a></li><li class="dropdown-item"><!----> <a href="/pages/31c4d3/" class="nav-link">嵌入式</a></li><li class="dropdown-item"><!----> <a href="/pages/cf83bf/" class="nav-link">python</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="项目实战" class="dropdown-title"><!----> <span class="title" style="display:;">项目实战</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/7a1d12/" class="nav-link">星球项目</a></li><li class="dropdown-item"><!----> <a href="/pages/91eb9e/" class="nav-link">开源项目</a></li></ul></div></div><div class="nav-item"><a href="/pages/a5da02/" class="nav-link">工具类</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Github" class="dropdown-title"><!----> <span class="title" style="display:;">Github</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>项目仓库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/liyao52033/liyao52033.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  部署仓库
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/liyao52033/vuepress-default" target="_blank" rel="noopener noreferrer" class="nav-link external">
  代码仓库
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>vuepress插件</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/shanyuhai123/vuepress-plugin-auto-sidebar" target="_blank" rel="noopener noreferrer" class="nav-link external">
  自动生成导航栏与侧边栏
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/meilisearch/vuepress-plugin-meilisearch" target="_blank" rel="noopener noreferrer" class="nav-link external">
  全文搜索
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/lq782655835/vuepress-plugin-element-ui" target="_blank" rel="noopener noreferrer" class="nav-link external">
  选项卡
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/ekoeryanto/vuepress-plugin-sitemap" target="_blank" rel="noopener noreferrer" class="nav-link external">
  自动生成sitemap
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>自主开发插件</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://github.com/liyao52033/vuepress-plugin-editfrontmatter" target="_blank" rel="noopener noreferrer" class="nav-link external">
  批量操作frontmatter
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/liyao52033/vuepress-plugins/tree/main/vuepress-plugin-twikoo" target="_blank" rel="noopener noreferrer" class="nav-link external">
  评论系统
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/liyao52033/vuepress-plugin-replaceurl" target="_blank" rel="noopener noreferrer" class="nav-link external">
  链接美化
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/liyao52033/vuepress-plugins/tree/main/vuepress-plugin-blocktoggle" target="_blank" rel="noopener noreferrer" class="nav-link external">
  折叠代码块
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/liyao52033/vuepress-plugins/tree/main/vuepress-plugin-copycodeblock" target="_blank" rel="noopener noreferrer" class="nav-link external">
  复制代码块
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>springboot</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>服务器相关</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/70967e/" aria-current="page" class="active sidebar-link">Docker使用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/70967e/#_1-docker概述" class="sidebar-link">1.docker概述</a></li><li class="sidebar-sub-header level2"><a href="/pages/70967e/#_2-虚拟化技术和容器化技术" class="sidebar-link">2.虚拟化技术和容器化技术</a></li><li class="sidebar-sub-header level2"><a href="/pages/70967e/#_3-docker的基本组成" class="sidebar-link">3.docker的基本组成</a></li><li class="sidebar-sub-header level2"><a href="/pages/70967e/#_4-docker的安装" class="sidebar-link">4.Docker的安装</a></li><li class="sidebar-sub-header level2"><a href="/pages/70967e/#_5-docker的卸载" class="sidebar-link">5.docker的卸载</a></li><li class="sidebar-sub-header level2"><a href="/pages/70967e/#_6-配置阿里云镜像加速" class="sidebar-link">6.配置阿里云镜像加速</a></li><li class="sidebar-sub-header level2"><a href="/pages/70967e/#_7-docker容器运行流程" class="sidebar-link">7.Docker容器运行流程</a></li><li class="sidebar-sub-header level2"><a href="/pages/70967e/#_8-底层原理" class="sidebar-link">8.底层原理</a></li><li class="sidebar-sub-header level2"><a href="/pages/70967e/#_9-docker常用命令" class="sidebar-link">9.docker常用命令</a></li><li class="sidebar-sub-header level2"><a href="/pages/70967e/#_10-图形化管理工具portaniner安装" class="sidebar-link">10.图形化管理工具Portaniner安装</a></li><li class="sidebar-sub-header level2"><a href="/pages/70967e/#_11-docker镜像详解" class="sidebar-link">11. Docker镜像详解</a></li><li class="sidebar-sub-header level2"><a href="/pages/70967e/#_12-常用容器部署" class="sidebar-link">12.常用容器部署</a></li></ul></li><li><a href="/pages/74f6d1/" class="sidebar-link">Docker部署前后端分离项目</a></li><li><a href="/pages/fa2c85/" class="sidebar-link">docker-compose使用</a></li><li><a href="/pages/7a54fa/" class="sidebar-link">代码上线事故原因</a></li><li><a href="/pages/93df54/" class="sidebar-link">rar for linux使用报错</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>腾讯云cos对象操作</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-13c63eef><div class="articleInfo" data-v-13c63eef><ul class="breadcrumbs" data-v-13c63eef><li data-v-13c63eef><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-13c63eef></a></li> <li data-v-13c63eef><a href="/categories/?category=%E5%90%8E%E7%AB%AF" title="分类" data-v-13c63eef>后端</a></li><li data-v-13c63eef><a href="/categories/?category=%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9B%B8%E5%85%B3" title="分类" data-v-13c63eef>服务器相关</a></li></ul> <div class="info" data-v-13c63eef><div title="作者" class="author iconfont icon-touxiang" data-v-13c63eef><a href="https://xiaoying.org.cn/" target="_blank" title="作者" class="beLink" data-v-13c63eef>华总</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-13c63eef><a href="javascript:;" data-v-13c63eef>2023-09-15</a></div> <div title="文章字数" class="book-words iconfont icon-book" style="float: left; margin-left: 20px; font-size: 0.8rem;" data-v-13c63eef><a href="javascript:;" style="margin-left: 3px; color: #888" data-v-13c63eef>0</a></div> <div title="预计阅读时间" class="reading-time iconfont icon-shijian" style="float: left; margin-left: 20px; font-size: 0.8rem;" data-v-13c63eef><a href="javascript:;" style="margin-left: 3px; color: #888" data-v-13c63eef>0</a></div> <div title="文章访问量" class="page-view iconfont icon-view" style="float: left; margin-left: 20px; font-size: 0.8rem;" data-v-13c63eef><a href="javascript:;" id="busuanzi_page_pv" class="view-data" data-v-13c63eef><i title="正在获取..." class="loading iconfont icon-loading" data-v-13c63eef></i></a></div> <div title="本文总访客量" class="page_total_view iconfont icon-tongji" style="float: left; margin-left: 20px; font-size: 0.8rem;" data-v-13c63eef><a href="javascript:;" id="busuanzi_page_uv" class="view-data" data-v-13c63eef><i title="正在获取..." class="loading iconfont icon-loading" data-v-13c63eef></i></a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">Docker使用<span class="title-tag">原创</span></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="_1-docker概述"><a href="#_1-docker概述" class="header-anchor">#</a> 1.docker概述</h2> <h3 id="_1-1-基本介绍"><a href="#_1-1-基本介绍" class="header-anchor">#</a> 1.1 基本介绍</h3> <p>Docker 是一个开源的应用容器引擎，基于 Go 语言 并遵从 Apache2.0 协议开源。</p> <p>Docker 可以让开发者打包他们的应用以及依赖包到一个轻量级、可移植的容器中，然后发布到任何流行的 Linux 机器上，也可以实现虚拟化。</p> <p>容器是完全使用沙箱机制，相互之间不会有任何接口,更重要的是容器性能开销极低。</p> <p>Docker 从 17.03 版本之后分为 CE（Community Edition: 社区版） 和 EE（Enterprise Edition: 企业版），我们用社区版就可以了。<a href="https://docs.docker.com/" target="_blank" rel="noopener noreferrer">官网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="_1-2-应用场景"><a href="#_1-2-应用场景" class="header-anchor">#</a> 1.2 应用场景</h3> <ol><li><p>Web 应用的自动化打包和发布。</p></li> <li><p>自动化测试和持续集成、发布。</p></li> <li><p>在服务型环境中部署和调整数据库或其他的后台应用。</p></li> <li><p>从头编译或者扩展现有的 Openshellift 或 Cloud Foundry 平台来搭建自己的 PaaS 环境。</p></li></ol> <h3 id="_1-3-docker-的优势"><a href="#_1-3-docker-的优势" class="header-anchor">#</a> 1.3 docker 的优势</h3> <p>Docker 是一个用于开发，交付和运行应用程序的开放平台。Docker 使您能够将应用程序与基础架构分开，从而可以快速交付软件。借助 Docker，您可以与管理应用程序相同的方式来管理基础架构。通过利用 Docker 的方法来快速交付，测试和部署代码，您可以大大减少编写代码和在生产环境中运行代码之间的延迟。</p> <ol><li>快速，一致地交付您的应用程序。Docker 允许开发人员使用您提供的应用程序或服务的本地容器在标准化环境中工作，从而简化了开发的生命周期。</li></ol> <p>容器非常适合持续集成和持续交付（CI / CD）工作流程，请考虑以下示例方案：</p> <p>您的开发人员在本地编写代码，并使用 Docker 容器与同事共享他们的工作。
他们使用 Docker 将其应用程序推送到测试环境中，并执行自动或手动测试。
当开发人员发现错误时，他们可以在开发环境中对其进行修复，然后将其重新部署到测试环境中，以进行测试和验证。
测试完成后，将修补程序推送给生产环境，就像将更新的镜像推送到生产环境一样简单。</p> <ol start="2"><li>响应式部署和扩展
Docker 是基于容器的平台，允许高度可移植的工作负载。Docker 容器可以在开发人员的本机上，数据中心的物理或虚拟机上，云服务上或混合环境中运行。</li></ol> <p>Docker 的可移植性和轻量级的特性，还可以使您轻松地完成动态管理的工作负担，并根据业务需求指示，实时扩展或拆除应用程序和服务。</p> <ol start="3"><li>在同一硬件上运行更多工作负载
Docker 轻巧快速。它为基于虚拟机管理程序的虚拟机提供了可行、经济、高效的替代方案，因此您可以利用更多的计算能力来实现业务目标。Docker 非常适合于高密度环境以及中小型部署，而您可以用更少的资源做更多的事情。</li></ol> <h2 id="_2-虚拟化技术和容器化技术"><a href="#_2-虚拟化技术和容器化技术" class="header-anchor">#</a> 2.虚拟化技术和容器化技术</h2> <p>虚拟化技术特点：</p> <ol><li>资源占用多</li> <li>冗余步骤多</li> <li>启动很慢</li></ol> <p>容器化技术：容器化技术不是模拟的一个完整的操作系统</p> <p>比较Docker和虚拟机的不同：</p> <ol><li>传统虚拟机，虚拟出硬件，运行一个完整的操作系统，然后在这个系统上安装和运行软件。</li> <li>Docker容器内的应用直接运行在宿主机的内容，容器是没有自己的内核的，也没有虚拟硬件。</li> <li>每个容器都是相互隔离的，每个容器都有属于自己的文件系统，互不影响。</li></ol> <p><img alt="20210717124434988.png" data-src="https://img.xiaoying.org.cn/img/202309160928894.png" loading="lazy" class="lazy"></p> <h2 id="_3-docker的基本组成"><a href="#_3-docker的基本组成" class="header-anchor">#</a> 3.docker的基本组成</h2> <p>Docker的基本组成图如下：
<img alt="20210717120256284.png" data-src="https://img.xiaoying.org.cn/img/202309160928656.png" loading="lazy" class="lazy"></p> <p>说明：</p> <p><img alt="20210717120343817.png" data-src="https://img.xiaoying.org.cn/img/202309160928671.png" loading="lazy" class="lazy"></p> <h2 id="_4-docker的安装"><a href="#_4-docker的安装" class="header-anchor">#</a> 4.Docker的安装</h2> <p>查看系统的内核：</p> <p>uname -r</p> <p>系统内核版本为3.10.0</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># uname -r</span>
<span class="token number">3.10</span>.0-957.21.3.el7.x86_64
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>查看系统配置</p> <p>cat /etc/os-release</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># cat /etc/os-release</span>
<span class="token assign-left variable">NAME</span><span class="token operator">=</span><span class="token string">&quot;CentOS Linux&quot;</span>
<span class="token assign-left variable">VERSION</span><span class="token operator">=</span><span class="token string">&quot;7 (Core)&quot;</span>
<span class="token assign-left variable">ID</span><span class="token operator">=</span><span class="token string">&quot;centos&quot;</span>
<span class="token assign-left variable">ID_LIKE</span><span class="token operator">=</span><span class="token string">&quot;rhel fedora&quot;</span>
<span class="token assign-left variable">VERSION_ID</span><span class="token operator">=</span><span class="token string">&quot;7&quot;</span>
<span class="token assign-left variable">PRETTY_NAME</span><span class="token operator">=</span><span class="token string">&quot;CentOS Linux 7 (Core)&quot;</span>
<span class="token assign-left variable">ANSI_COLOR</span><span class="token operator">=</span><span class="token string">&quot;0;31&quot;</span>
<span class="token assign-left variable">CPE_NAME</span><span class="token operator">=</span><span class="token string">&quot;cpe:/o:centos:centos:7&quot;</span>
<span class="token assign-left variable">HOME_URL</span><span class="token operator">=</span><span class="token string">&quot;https://www.centos.org/&quot;</span>
<span class="token assign-left variable">BUG_REPORT_URL</span><span class="token operator">=</span><span class="token string">&quot;https://bugs.centos.org/&quot;</span>

<span class="token assign-left variable">CENTOS_MANTISBT_PROJECT</span><span class="token operator">=</span><span class="token string">&quot;CentOS-7&quot;</span>
<span class="token assign-left variable">CENTOS_MANTISBT_PROJECT_VERSION</span><span class="token operator">=</span><span class="token string">&quot;7&quot;</span>
<span class="token assign-left variable">REDHAT_SUPPORT_PRODUCT</span><span class="token operator">=</span><span class="token string">&quot;centos&quot;</span>
<span class="token assign-left variable">REDHAT_SUPPORT_PRODUCT_VERSION</span><span class="token operator">=</span><span class="token string">&quot;7&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>Docker的安装步骤：</p> <h3 id="_4-1-卸载旧的版本"><a href="#_4-1-卸载旧的版本" class="header-anchor">#</a> 4.1 卸载旧的版本</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>yum remove <span class="token function">docker</span> <span class="token punctuation">\</span>
                  docker-client <span class="token punctuation">\</span>
                  docker-client-latest <span class="token punctuation">\</span>
                  docker-common <span class="token punctuation">\</span>
                  docker-latest <span class="token punctuation">\</span>
                  docker-latest-logrotate <span class="token punctuation">\</span>
                  docker-logrotate <span class="token punctuation">\</span>
                  docker-engine
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_4-2-下载需要的安装包"><a href="#_4-2-下载需要的安装包" class="header-anchor">#</a> 4.2 下载需要的安装包</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>yum <span class="token function">install</span> <span class="token parameter variable">-y</span> yum-utils
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_4-3-设置镜像的仓库"><a href="#_4-3-设置镜像的仓库" class="header-anchor">#</a> 4.3 设置镜像的仓库</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>yum-config-manager <span class="token punctuation">\</span>
    --add-repo <span class="token punctuation">\</span>
    https://download.docker.com/linux/centos/docker-ce.repo  <span class="token comment">#国外的地址</span>
    
    <span class="token comment"># 设置阿里云的Docker镜像仓库</span>
yum-config-manager <span class="token punctuation">\</span>
    --add-repo <span class="token punctuation">\</span>
    https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo  <span class="token comment">#国内的地址</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_4-4-更新yum软件包索引"><a href="#_4-4-更新yum软件包索引" class="header-anchor">#</a> 4.4 更新yum软件包索引</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>yum makecache fast
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_4-5-安装docker相关配置"><a href="#_4-5-安装docker相关配置" class="header-anchor">#</a> 4.5 安装docker相关配置</h3> <p>docker-ce 是社区版，docker-ee 企业版</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>yum <span class="token function">install</span> docker-ce docker-ce-cli containerd.io
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>出现了completed即安装成功。</p> <h3 id="_4-6启动docker"><a href="#_4-6启动docker" class="header-anchor">#</a> 4.6启动docker</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>systemctl start <span class="token function">docker</span>
<span class="token comment"># 查看当前版本号，是否启动成功</span>
<span class="token function">docker</span> version
<span class="token comment"># 设置开机自启动</span>
systemctl <span class="token builtin class-name">enable</span> <span class="token function">docker</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>结果：</p> <p><img alt="2021071712515566.png" data-src="https://img.xiaoying.org.cn/img/202309160928778.png" loading="lazy" class="lazy"></p> <p>下载hello-world镜像进行测试</p> <p><img alt="20210717125227931.png" data-src="https://img.xiaoying.org.cn/img/202309160928735.png" loading="lazy" class="lazy"></p> <p>查看下载的hello world镜像</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z lib<span class="token punctuation">]</span><span class="token comment"># docker images</span>
REPOSITORY    TAG       IMAGE ID       CREATED         SIZE
hello-world   latest    bf756fb1ae65   <span class="token number">11</span> months ago   <span class="token number">13</span>.3kB
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_5-docker的卸载"><a href="#_5-docker的卸载" class="header-anchor">#</a> 5.docker的卸载</h2> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment"># 1. 卸载依赖</span>
yum remove docker-ce docker-ce-cli containerd.io
<span class="token comment"># 2. 删除资源  . /var/lib/docker是docker的默认工作路径</span>
<span class="token function">rm</span> <span class="token parameter variable">-rf</span> /var/lib/docker
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_6-配置阿里云镜像加速"><a href="#_6-配置阿里云镜像加速" class="header-anchor">#</a> 6.配置阿里云镜像加速</h2> <h3 id="_6-1-进入阿里云官网-搜索容器镜像服务"><a href="#_6-1-进入阿里云官网-搜索容器镜像服务" class="header-anchor">#</a> 6.1 进入阿里云官网，搜索容器镜像服务</h3> <p><img alt="20210717125337690.png" data-src="https://img.xiaoying.org.cn/img/202309160928761.png" loading="lazy" class="lazy"></p> <h3 id="_6-2-依次执行官方的这四条命令"><a href="#_6-2-依次执行官方的这四条命令" class="header-anchor">#</a> 6.2 依次执行官方的这四条命令</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">sudo</span> <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> /etc/docker
<span class="token function">sudo</span> <span class="token function">tee</span> /etc/docker/daemon.json <span class="token operator">&lt;&lt;-</span><span class="token string">'EOF'
{
  &quot;registry-mirrors&quot;: [&quot;https://axvfsf7e.mirror.aliyuncs.com&quot;]
}
EOF</span>
<span class="token function">sudo</span> systemctl daemon-reload
<span class="token function">sudo</span> systemctl restart <span class="token function">docker</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="_7-docker容器运行流程"><a href="#_7-docker容器运行流程" class="header-anchor">#</a> 7.Docker容器运行流程</h2> <p>启动一个容器，Docker的运行流程如下图：</p> <p><img alt="20210717125820781.png" data-src="https://img.xiaoying.org.cn/img/202309160928441.png" loading="lazy" class="lazy"></p> <h2 id="_8-底层原理"><a href="#_8-底层原理" class="header-anchor">#</a> 8.底层原理</h2> <p>Docker是一个Client-Server结构的系统，Docker的守护进程运行在主机上，通过Socker从客户端访问！Docker Server接收到Docker-Client的指令，就会执行这个指令！</p> <p><img alt="20210717130715341.png" data-src="https://img.xiaoying.org.cn/img/202309160928514.png" loading="lazy" class="lazy"></p> <p>Docker为什么比VM Ware快？</p> <p>1.Docker比虚拟机更少的抽象层</p> <p>2.docker利用宿主机的内核，VM需要的是Guest OS</p> <p><img alt="20210717130758965.png" data-src="https://img.xiaoying.org.cn/img/202309160928455.png" loading="lazy" class="lazy"></p> <p>Docker新建一个容器的时候，不需要像虚拟机一样重新加载一个操作系统内核，直接利用宿主机的操作系统，而虚拟机是需要加载Guest OS。Docker和VM的对比如下：</p> <p><img alt="20210717134556550.png" data-src="https://img.xiaoying.org.cn/img/202309160928571.png" loading="lazy" class="lazy"></p> <h2 id="_9-docker常用命令"><a href="#_9-docker常用命令" class="header-anchor">#</a> 9.docker常用命令</h2> <h3 id="_9-1-基础命令"><a href="#_9-1-基础命令" class="header-anchor">#</a> 9.1 基础命令</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> version          <span class="token comment">#查看docker的版本信息</span>
<span class="token function">docker</span> info             <span class="token comment">#查看docker的系统信息,包括镜像和容器的数量</span>
<span class="token function">docker</span> 命令 <span class="token parameter variable">--help</span>       <span class="token comment">#帮助命令(可查看可选的参数)</span>
<span class="token function">docker</span> COMMAND <span class="token parameter variable">--help</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>命令的帮助<a href="https://docs.docker.com/engine/reference/commandline/docker/" target="_blank" rel="noopener noreferrer">文档地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="_9-2-镜像命令"><a href="#_9-2-镜像命令" class="header-anchor">#</a> 9.2 镜像命令</h3> <h4 id="查看所有镜像"><a href="#查看所有镜像" class="header-anchor">#</a> 查看所有镜像</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># docker images</span>
REPOSITORY    TAG       IMAGE ID       CREATED         SIZE
hello-world   latest    bf756fb1ae65   <span class="token number">11</span> months ago   <span class="token number">13</span>.3kB

<span class="token comment">#解释:</span>
<span class="token number">1</span>.REPOSITORY  镜像的仓库源

<span class="token number">2</span>.TAG  镜像的标签

<span class="token number">3</span>.IMAGE ID 镜像的id

<span class="token number">4</span>.CREATED 镜像的创建时间

<span class="token number">5</span>.SIZE 镜像的大小


<span class="token comment"># 可选参数</span>

-a/--all 列出所有镜像

-q/--quiet 只显示镜像的id
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h4 id="搜索镜像"><a href="#搜索镜像" class="header-anchor">#</a> 搜索镜像</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># docker search mysql</span>
NAME                              DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED
mysql                             MySQL is a widely used, open-source relation…   <span class="token number">10308</span>     <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>
mariadb                           MariaDB is a community-developed fork of MyS…   <span class="token number">3819</span>      <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>
mysql/mysql-server                Optimized MySQL Server Docker images. Create…   <span class="token number">754</span>                  <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>
percona                           Percona Server is a fork of the MySQL relati…   <span class="token number">517</span>       <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>
centos/mysql-57-centos7           MySQL <span class="token number">5.7</span> SQL database server                   <span class="token number">86</span>
mysql/mysql-cluster               Experimental MySQL Cluster Docker images. Cr…   <span class="token number">79</span>
centurylink/mysql                 Image containing mysql. Optimized to be link…   <span class="token number">60</span>                   <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>


<span class="token comment">#可选参数</span>

Search the Docker Hub <span class="token keyword">for</span> images

Options:
  -f, <span class="token parameter variable">--filter</span> filter   Filter output based on conditions provided
      <span class="token parameter variable">--format</span> string   Pretty-print search using a Go template
      <span class="token parameter variable">--limit</span> int       Max number of search results <span class="token punctuation">(</span>default <span class="token number">25</span><span class="token punctuation">)</span>
      --no-trunc        Don't truncate output
      
      
<span class="token comment">#搜索收藏数大于3000的镜像</span>
<span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># docker search mysql --filter=STARS=3000</span>
NAME      DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED
mysql     MySQL is a widely used, open-source relation…   <span class="token number">10308</span>     <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>
mariadb   MariaDB is a community-developed fordockerk of MyS…   <span class="token number">3819</span>      <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h4 id="docker-pull-镜像名-tag-下载镜像"><a href="#docker-pull-镜像名-tag-下载镜像" class="header-anchor">#</a> <strong>docker pull 镜像名[:tag]</strong> 下载镜像</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># docker pull mysql</span>
Using default tag: latest            <span class="token comment">#如果不写tag默认就是latest</span>
latest: Pulling from library/mysql
6ec7b7d162b2: Pull complete          <span class="token comment">#分层下载,docker image的核心-联合文件系统</span>
fedd960d3481: Pull complete
7ab947313861: Pull complete
64f92f19e638: Pull complete
3e80b17bff96: Pull complete
014e976799f9: Pull complete
59ae84fee1b3: Pull complete
ffe10de703ea: Pull complete
657af6d90c83: Pull complete
98bfb480322c: Pull complete
6aa3859c4789: Pull complete
1ed875d851ef: Pull complete
Digest: shella256:78800e6d3f1b230e35275145e657b82c3fb02a27b2d8e76aac2f5e90c1c30873 <span class="token comment">#签名</span>
Status: Downloaded newer image <span class="token keyword">for</span> mysql:latest
docker.io/library/mysql:latest  <span class="token comment">#下载来源的真实地址  #docker pull mysql等价于docker pull docker.io/library/mysql:latest</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>指定版本下载</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># docker pull mysql:5.7</span>
<span class="token number">5.7</span>: Pulling from library/mysql
6ec7b7d162b2: Already exists
fedd960d3481: Already exists
7ab947313861: Already exists
64f92f19e638: Already exists
3e80b17bff96: Already exists
014e976799f9: Already exists
59ae84fee1b3: Already exists
7d1da2a18e2e: Pull complete
301a28b700b9: Pull complete
529dc8dbeaf3: Pull complete
bc9d021dc13f: Pull complete
Digest: shella256:c3a567d3e3ad8b05dfce401ed08f0f6bf3f3b64cc17694979d5f2e5d78e10173
Status: Downloaded newer image <span class="token keyword">for</span> mysql:5.7
docker.io/library/mysql:5.7
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h4 id="删除镜像"><a href="#删除镜像" class="header-anchor">#</a> 删除镜像</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#1.删除指定的镜像id</span>
<span class="token function">docker</span> rmi <span class="token parameter variable">-f</span>  镜像id
<span class="token comment">#2.删除多个镜像id</span>
<span class="token function">docker</span> rmi <span class="token parameter variable">-f</span>  镜像id 镜像id 镜像id
<span class="token comment">#3.删除全部的镜像id</span>
<span class="token function">docker</span> rmi <span class="token parameter variable">-f</span>  <span class="token variable"><span class="token variable">$(</span><span class="token function">docker</span> images <span class="token parameter variable">-aq</span><span class="token variable">)</span></span>
<span class="token comment">#4.删除未使用的镜像</span>
<span class="token function">docker</span> system prune <span class="token parameter variable">-a</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_9-3-容器命令"><a href="#_9-3-容器命令" class="header-anchor">#</a> 9.3 容器命令</h3> <h4 id="拉取一个centos镜像"><a href="#拉取一个centos镜像" class="header-anchor">#</a> 拉取一个centos镜像</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> pull centos
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="运行容器的命令说明"><a href="#运行容器的命令说明" class="header-anchor">#</a> 运行容器的命令说明</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> run <span class="token punctuation">[</span>可选参数<span class="token punctuation">]</span> image

<span class="token comment">#参数说明</span>
<span class="token parameter variable">--name</span><span class="token operator">=</span><span class="token string">&quot;名字&quot;</span>           指定容器名字
<span class="token parameter variable">-d</span>                     后台方式运行
<span class="token parameter variable">-it</span>                    使用交互方式运行,进入容器查看内容
<span class="token parameter variable">-p</span>                     指定容器的端口
<span class="token punctuation">(</span>
<span class="token parameter variable">-p</span> ip:主机端口:容器端口  配置主机端口映射到容器端口
<span class="token parameter variable">-p</span> 主机端口:容器端口
<span class="token parameter variable">-p</span> 容器端口
<span class="token punctuation">)</span>
<span class="token parameter variable">-P</span>                     随机指定端口<span class="token punctuation">(</span>大写的P<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h4 id="运行并进入容器centos"><a href="#运行并进入容器centos" class="header-anchor">#</a> 运行并进入容器centos</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># docker run -it centos /bin/bashell</span>
<span class="token punctuation">[</span>root@bd1b8900c547 /<span class="token punctuation">]</span><span class="token comment"># ls      </span>
bin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="退出容器命令"><a href="#退出容器命令" class="header-anchor">#</a> 退出容器命令</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#exit 停止并退出容器（后台方式运行则仅退出）</span>
<span class="token comment">#Ctrl+P+Q  不停止容器退出</span>
<span class="token punctuation">[</span>root@bd1b8900c547 /<span class="token punctuation">]</span><span class="token comment"># exit</span>
<span class="token builtin class-name">exit</span>
<span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment">#</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="列出运行过的容器命令"><a href="#列出运行过的容器命令" class="header-anchor">#</a> 列出运行过的容器命令</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#docker ps </span>
     <span class="token comment"># 列出当前正在运行的容器</span>
<span class="token parameter variable">-a</span>   <span class="token comment"># 列出所有容器的运行记录</span>
<span class="token parameter variable">-n</span><span class="token operator">=</span>? <span class="token comment"># 显示最近创建的n个容器</span>
<span class="token parameter variable">-q</span>   <span class="token comment"># 只显示容器的编号</span>


<span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># docker ps</span>
CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES
<span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># docker ps -a</span>
CONTAINER ID   IMAGE          COMMAND       CREATED         STATUS                     PORTS     NAMES
bca129320bb5   centos         <span class="token string">&quot;/bin/bashell&quot;</span>   <span class="token number">4</span> minutes ago   Exited <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">3</span> minutes ago             optimistic_shelltern
bd1b8900c547   centos         <span class="token string">&quot;/bin/bashell&quot;</span>   <span class="token number">6</span> minutes ago   Exited <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">5</span> minutes ago             cool_tesla
cf6adbf1b506   bf756fb1ae65   <span class="token string">&quot;/hello&quot;</span>      <span class="token number">5</span> hours ago     Exited <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token number">5</span> hours ago               optimistic_darwin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="删除容器命令"><a href="#删除容器命令" class="header-anchor">#</a> 删除容器命令</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> <span class="token function">rm</span> 容器id                 <span class="token comment">#删除指定的容器,不能删除正在运行的容器,强制删除使用 rm -f</span>
<span class="token function">docker</span> <span class="token function">rm</span> <span class="token parameter variable">-f</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">docker</span> <span class="token function">ps</span> <span class="token parameter variable">-aq</span><span class="token variable">)</span></span>   <span class="token comment">#删除所有的容器(慎用)</span>
<span class="token function">docker</span> <span class="token function">ps</span> <span class="token parameter variable">-a</span> -q<span class="token operator">|</span><span class="token function">xargs</span> <span class="token function">docker</span> <span class="token function">rm</span> <span class="token comment">#删除所有的容器(慎用)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="启动和停止容器命令"><a href="#启动和停止容器命令" class="header-anchor">#</a> 启动和停止容器命令</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> start 容器id          <span class="token comment">#启动容器</span>
<span class="token function">docker</span> restart 容器id        <span class="token comment">#重启容器</span>
<span class="token function">docker</span> stop 容器id           <span class="token comment">#停止当前运行的容器</span>
<span class="token function">docker</span> <span class="token function">kill</span> 容器id           <span class="token comment">#强制停止当前容器</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_9-4其他命令的使用"><a href="#_9-4其他命令的使用" class="header-anchor">#</a> 9.4其他命令的使用</h3> <h4 id="日志的查看"><a href="#日志的查看" class="header-anchor">#</a> 日志的查看</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># docker logs --help</span>

Usage:  <span class="token function">docker</span> logs <span class="token punctuation">[</span>OPTIONS<span class="token punctuation">]</span> CONTAINER

Fetch the logs of a container

Options:
      <span class="token parameter variable">--details</span>        shellow extra details provided to logs
  -f, <span class="token parameter variable">--follow</span>         Follow log output
      <span class="token parameter variable">--since</span> string   shellow logs since timestamp <span class="token punctuation">(</span>e.g. <span class="token number">2013</span>-01-02T13:23:37Z<span class="token punctuation">)</span> or relative <span class="token punctuation">(</span>e.g. 42m <span class="token keyword">for</span> <span class="token number">42</span> minutes<span class="token punctuation">)</span>
  -n, <span class="token parameter variable">--tail</span> string    Number of lines to shellow from the end of the logs <span class="token punctuation">(</span>default <span class="token string">&quot;all&quot;</span><span class="token punctuation">)</span>
  -t, <span class="token parameter variable">--timestamps</span>     shellow timestamps
      <span class="token parameter variable">--until</span> string   shellow logs before a timestamp <span class="token punctuation">(</span>e.g. <span class="token number">2013</span>-01-02T13:23:37Z<span class="token punctuation">)</span> or relative <span class="token punctuation">(</span>e.g. 42m <span class="token keyword">for</span> <span class="token number">42</span> minutes<span class="token punctuation">)</span>

常用：
<span class="token function">docker</span> logs <span class="token parameter variable">-tf</span> 容器id
<span class="token function">docker</span> logs <span class="token parameter variable">--tail</span> number 容器id <span class="token comment">#num为要显示的日志条数</span>


<span class="token comment">#docker容器后台运行，必须要有一个前台的进程，否则会自动停止</span>
<span class="token comment">#编写shellell脚本循环执行，使得centos容器保持运行状态</span>
<span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># docker run -d centos /bin/shell -c &quot;while true;do echo hi;sleep 5;done&quot;</span>
c703b5b1911ff84d584390263a35707b6024816e1f46542b61918a6327a570dc
<span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># docker ps</span>
CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS     NAMES
c703b5b1911f   centos    <span class="token string">&quot;/bin/shell -c 'while t…&quot;</span>   <span class="token number">13</span> seconds ago   Up <span class="token number">10</span> seconds             pedantic_banach
<span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># docker logs -tf --tail 10 c703b5b1911f</span>
<span class="token number">2020</span>-12-27T03:34:07.255599560Z hi
<span class="token number">2020</span>-12-27T03:34:12.257641517Z hi
<span class="token number">2020</span>-12-27T03:34:17.259706294Z hi
<span class="token number">2020</span>-12-27T03:34:22.261693707Z hi
<span class="token number">2020</span>-12-27T03:34:27.262609289Z hi
<span class="token number">2020</span>-12-27T03:34:32.267862677Z hi
<span class="token number">2020</span>-12-27T03:34:37.270382873Z hi
<span class="token number">2020</span>-12-27T03:34:42.272414182Z hi
<span class="token number">2020</span>-12-27T03:34:47.274823243Z hi
<span class="token number">2020</span>-12-27T03:34:52.277419274Z hi
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h4 id="查看容器中进程信息"><a href="#查看容器中进程信息" class="header-anchor">#</a> 查看容器中进程信息</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># docker top 容器ID</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="查看容器的元数据"><a href="#查看容器的元数据" class="header-anchor">#</a> 查看容器的元数据</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># docker inspect 容器ID</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="进入当前正在运行的容器"><a href="#进入当前正在运行的容器" class="header-anchor">#</a> 进入当前正在运行的容器</h4> <p>因为通常我们的容器都是使用后台方式来运行的，有时需要进入容器修改配置</p> <p>方式一：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># docker exec -it 容器ID /bin/bashell</span>
<span class="token punctuation">[</span>root@c703b5b1911f /<span class="token punctuation">]</span><span class="token comment"># ls</span>
bin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
<span class="token punctuation">[</span>root@c703b5b1911f /<span class="token punctuation">]</span><span class="token comment"># ps -ef      </span>
<span class="token environment constant">UID</span>        PID  <span class="token environment constant">PPID</span>  C STIME TTY          TIME CMD
root         <span class="token number">1</span>     <span class="token number">0</span>  <span class="token number">0</span> 03:31 ?        00:00:00 /bin/shell <span class="token parameter variable">-c</span> <span class="token keyword">while</span> <span class="token boolean">true</span><span class="token punctuation">;</span><span class="token keyword">do</span> <span class="token builtin class-name">echo</span> hi<span class="token punctuation">;</span><span class="token function">sleep</span> <span class="token number">5</span><span class="token punctuation">;</span><span class="token keyword">done</span>
root       <span class="token number">279</span>     <span class="token number">0</span>  <span class="token number">0</span> 03:54 pts/0    00:00:00 /bin/bashell
root       <span class="token number">315</span>     <span class="token number">1</span>  <span class="token number">0</span> 03:56 ?        00:00:00 /usr/bin/coreutils --coreutils-prog-shellebang<span class="token operator">=</span>sleep /usr/bin/sleep <span class="token number">5</span>
root       <span class="token number">316</span>   <span class="token number">279</span>  <span class="token number">0</span> 03:56 pts/0    00:00:00 <span class="token function">ps</span> <span class="token parameter variable">-ef</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>方式二：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># docker attach 容器ID</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="拷贝操作"><a href="#拷贝操作" class="header-anchor">#</a> 拷贝操作</h4> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#拷贝容器的文件到主机中</span>
<span class="token comment"># docker cp 容器id:容器内路径  目的主机路径</span>
<span class="token function">docker</span> <span class="token function">cp</span>  grafana:/etc/grafana/grafana.ini /var/grafana-storage/_data/

<span class="token comment">#拷贝宿主机的文件到容器中</span>
<span class="token comment"># docker cp 目的主机路径 容器id:容器内路径</span>
<span class="token function">docker</span> <span class="token function">cp</span> /var/grafana-storage/_data/  grafana:/etc/grafana/grafana.ini 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>命令小节的图解如下：</p> <p><img alt="20210717134852290.png" data-src="https://img.xiaoying.org.cn/img/202309160928585.png" loading="lazy" class="lazy"></p> <h2 id="_10-图形化管理工具portaniner安装"><a href="#_10-图形化管理工具portaniner安装" class="header-anchor">#</a> 10.图形化管理工具Portaniner安装</h2> <p>Portaniner是Docker的图形化管理工具，类似的工具还有Rancher(CI/CD再用)</p> <p>下载运行Portaniner镜像并运行，设置本机映射端口为8088</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@localhost conf<span class="token punctuation">]</span><span class="token comment"># docker run -d -p 8088:9000 --restart=always -v /var/run/docker.sock:/var/run/docker.sock --privileged=true portainer/portainer</span>
Unable to <span class="token function">find</span> image <span class="token string">'portainer/portainer:latest'</span> locally
latest: Pulling from portainer/portainer
94cfa856b2b1: Pull complete
49d59ee0881a: Pull complete
a2300fd28637: Pull complete
Digest: shella256:fb45b43738646048a0a0cc74fcee2865b69efde857e710126084ee5de9be0f3f
Status: Downloaded newer image <span class="token keyword">for</span> portainer/portainer:latest
8c525a0137be22965bd1e3944da622a2c4248f8ad20883f4b3ea4f8a6b11e163
<span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># docker ps</span>
CONTAINER ID   IMAGE                 COMMAND        CREATED         STATUS         PORTS                    NAMES
7789d4505a00   portainer/portainer   <span class="token string">&quot;/portainer&quot;</span>   <span class="token number">6</span> seconds ago   Up <span class="token number">5</span> seconds   <span class="token number">0.0</span>.0.0:8088-<span class="token operator">&gt;</span><span class="token number">9000</span>/tcp   quirky_sinoussi
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>第一次登录设置admin用户的密码</p> <p><img alt="20210718000547236.png" data-src="https://img.xiaoying.org.cn/img/202309160928693.png" loading="lazy" class="lazy"></p> <p>如果是阿里云服务器记得设置安全组，选择连接本地的Docker,整体界面预览如下图：</p> <p><img alt="20210718000659945.png" data-src="https://img.xiaoying.org.cn/img/202309160928090.png" loading="lazy" class="lazy"></p> <h2 id="_11-docker镜像详解"><a href="#_11-docker镜像详解" class="header-anchor">#</a> 11. Docker镜像详解</h2> <h3 id="_11-1-什么是镜像"><a href="#_11-1-什么是镜像" class="header-anchor">#</a> 11.1 什么是镜像</h3> <p>镜像是一种轻量级、可执行的独立软件包，用来打包软件运行环境和基于运行环境开发的软件，它包含运行某个软件所需要的所有内容，包括代码，运行时（一个程序在运行或者在被执行的依赖）、库，环境变量和配置文件。</p> <h3 id="_11-2-docker镜像加载原理"><a href="#_11-2-docker镜像加载原理" class="header-anchor">#</a> 11.2 Docker镜像加载原理</h3> <p>Docker的镜像实际上由一层一层的文件系统组成，这种层级的文件系统是UnionFS联合文件系统。</p> <p><img alt="20210718123220152.png" data-src="https://img.xiaoying.org.cn/img/202309160928336.png" loading="lazy" class="lazy"></p> <p><img alt="20210718123416610.png" data-src="https://img.xiaoying.org.cn/img/202309160928165.png" loading="lazy" class="lazy"></p> <h3 id="_11-3-分层理解"><a href="#_11-3-分层理解" class="header-anchor">#</a> 11.3 分层理解</h3> <p><img alt="20210718123512798.png" data-src="https://img.xiaoying.org.cn/img/202309160928300.png" loading="lazy" class="lazy"></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># docker image inspect nginx:latest</span>
<span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token string">&quot;Id&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;shella256:ae2feff98a0cc5095d97c6c283dcd33090770c76d63877caa99aefbbe4343bdd&quot;</span>,
        <span class="token string">&quot;RepoTags&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;nginx:latest&quot;</span>
        <span class="token punctuation">]</span>,
        <span class="token string">&quot;RepoDigests&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
            <span class="token string">&quot;nginx@shella256:4cf620a5c81390ee209398ecc18e5fb9dd0f5155cd82adcbae532fec94006fb9&quot;</span>
        <span class="token punctuation">]</span>,
        <span class="token string">&quot;Parent&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
        <span class="token string">&quot;Comment&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
        <span class="token string">&quot;Created&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;2020-12-15T20:21:00.007674532Z&quot;</span>,
        <span class="token string">&quot;Container&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;4cc5da85f27ca0d200407f0593422676a3bab482227daee044d797d1798c96c9&quot;</span>,
        <span class="token string">&quot;ContainerConfig&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;Hostname&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;4cc5da85f27c&quot;</span>,
            <span class="token string">&quot;Domainname&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;User&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;AttachStdin&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;AttachStdout&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;AttachStderr&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;ExposedPorts&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;80/tcp&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
            <span class="token punctuation">}</span>,
            <span class="token string">&quot;Tty&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;OpenStdin&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;StdinOnce&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;Env&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;</span>,
                <span class="token string">&quot;NGINX_VERSION=1.19.6&quot;</span>,
                <span class="token string">&quot;NJS_VERSION=0.5.0&quot;</span>,
                <span class="token string">&quot;PKG_RELEASE=1~buster&quot;</span>
            <span class="token punctuation">]</span>,
            <span class="token string">&quot;Cmd&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;/bin/shell&quot;</span>,
                <span class="token string">&quot;-c&quot;</span>,
                <span class="token string">&quot;#(nop) &quot;</span>,
                <span class="token string">&quot;CMD [<span class="token entity" title="\&quot;">\&quot;</span>nginx<span class="token entity" title="\&quot;">\&quot;</span> <span class="token entity" title="\&quot;">\&quot;</span>-g<span class="token entity" title="\&quot;">\&quot;</span> <span class="token entity" title="\&quot;">\&quot;</span>daemon off;<span class="token entity" title="\&quot;">\&quot;</span>]&quot;</span>
            <span class="token punctuation">]</span>,
            <span class="token string">&quot;Image&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;shella256:13bffe371b56f4aeed88218ec17d0c6f653a83b49bd3e211fc8cfa2ca5d7a3d3&quot;</span>,
            <span class="token string">&quot;Volumes&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;WorkingDir&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;Entrypoint&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;/docker-entrypoint.shell&quot;</span>
            <span class="token punctuation">]</span>,
            <span class="token string">&quot;OnBuild&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;Labels&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;maintainer&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;NGINX Docker Maintainers &lt;docker-maint@nginx.com&gt;&quot;</span>
            <span class="token punctuation">}</span>,
            <span class="token string">&quot;StopSignal&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;SIGQUIT&quot;</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;DockerVersion&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;19.03.12&quot;</span>,
        <span class="token string">&quot;Author&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
        <span class="token string">&quot;Config&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;Hostname&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;Domainname&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;User&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;AttachStdin&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;AttachStdout&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;AttachStderr&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;ExposedPorts&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;80/tcp&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
            <span class="token punctuation">}</span>,
            <span class="token string">&quot;Tty&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;OpenStdin&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;StdinOnce&quot;</span><span class="token builtin class-name">:</span> false,
            <span class="token string">&quot;Env&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;</span>,
                <span class="token string">&quot;NGINX_VERSION=1.19.6&quot;</span>,
                <span class="token string">&quot;NJS_VERSION=0.5.0&quot;</span>,
                <span class="token string">&quot;PKG_RELEASE=1~buster&quot;</span>
            <span class="token punctuation">]</span>,
            <span class="token string">&quot;Cmd&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;nginx&quot;</span>,
                <span class="token string">&quot;-g&quot;</span>,
                <span class="token string">&quot;daemon off;&quot;</span>
            <span class="token punctuation">]</span>,
            <span class="token string">&quot;Image&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;shella256:13bffe371b56f4aeed88218ec17d0c6f653a83b49bd3e211fc8cfa2ca5d7a3d3&quot;</span>,
            <span class="token string">&quot;Volumes&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;WorkingDir&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;&quot;</span>,
            <span class="token string">&quot;Entrypoint&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;/docker-entrypoint.shell&quot;</span>
            <span class="token punctuation">]</span>,
            <span class="token string">&quot;OnBuild&quot;</span><span class="token builtin class-name">:</span> null,
            <span class="token string">&quot;Labels&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;maintainer&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;NGINX Docker Maintainers &lt;docker-maint@nginx.com&gt;&quot;</span>
            <span class="token punctuation">}</span>,
            <span class="token string">&quot;StopSignal&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;SIGQUIT&quot;</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;Architecture&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;amd64&quot;</span>,
        <span class="token string">&quot;Os&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;linux&quot;</span>,
        <span class="token string">&quot;Size&quot;</span><span class="token builtin class-name">:</span> <span class="token number">132935043</span>,
        <span class="token string">&quot;VirtualSize&quot;</span><span class="token builtin class-name">:</span> <span class="token number">132935043</span>,
        <span class="token string">&quot;GraphDriver&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;Data&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
                <span class="token string">&quot;LowerDir&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/var/lib/docker/overlay2/cb791e78a08db7091bf2ce1d78603f1758f52199e57f1805156fe30e39067aae/diff:/var/lib/docker/overlay2/1e73a72b25af68ee9abf4eb443f778d31226e12e9af428fcc14c7b044c83b258/diff:/var/lib/docker/overlay2/88c9c01762f2af8327db65d0b0d4a64785e87c9c2ab76c62e7d03619db03a985/diff:/var/lib/docker/overlay2/7304ab112ac4a9cb91fc6f74730be28fecbe19f042e92d321aa9181424cc4b2e/diff&quot;</span>,
                <span class="token string">&quot;MergedDir&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/var/lib/docker/overlay2/48b288740bbb2b07b41ed43a4d17a005c46b08d3357d2960b5ef7db4b2de6618/merged&quot;</span>,
                <span class="token string">&quot;UpperDir&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/var/lib/docker/overlay2/48b288740bbb2b07b41ed43a4d17a005c46b08d3357d2960b5ef7db4b2de6618/diff&quot;</span>,
                <span class="token string">&quot;WorkDir&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;/var/lib/docker/overlay2/48b288740bbb2b07b41ed43a4d17a005c46b08d3357d2960b5ef7db4b2de6618/work&quot;</span>
            <span class="token punctuation">}</span>,
            <span class="token string">&quot;Name&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;overlay2&quot;</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;RootFS&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;Type&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;layers&quot;</span>,
            <span class="token string">&quot;Layers&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;shella256:87c8a1d8f54f3aa4e05569e8919397b65056aa71cdf48b7f061432c98475eee9&quot;</span>,
                <span class="token string">&quot;shella256:5c4e5adc71a82a96f02632433de31c998c5a9e2fccdcbaee780ae83158fac4fa&quot;</span>,
                <span class="token string">&quot;shella256:7d2b207c26790f693ab1942bbe26af8e2b6a14248969e542416155a912fec30d&quot;</span>,
                <span class="token string">&quot;shella256:2c7498eef94aef8c40d106f3e42f7da62b3eee8fd36012bf7379becc4cd639a2&quot;</span>,
                <span class="token string">&quot;shella256:4eaf0ea085df254fd5d2beba4e2c11db70a620dfa411a8ad44149e26428caee4&quot;</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>,
        <span class="token string">&quot;Metadata&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;LastTagTime&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;0001-01-01T00:00:00Z&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br></div></div><p>这里指示了分层信息：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>        <span class="token string">&quot;RootFS&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">{</span>
            <span class="token string">&quot;Type&quot;</span><span class="token builtin class-name">:</span> <span class="token string">&quot;layers&quot;</span>,
            <span class="token string">&quot;Layers&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span>
                <span class="token string">&quot;shella256:87c8a1d8f54f3aa4e05569e8919397b65056aa71cdf48b7f061432c98475eee9&quot;</span>,
                <span class="token string">&quot;shella256:5c4e5adc71a82a96f02632433de31c998c5a9e2fccdcbaee780ae83158fac4fa&quot;</span>,
                <span class="token string">&quot;shella256:7d2b207c26790f693ab1942bbe26af8e2b6a14248969e542416155a912fec30d&quot;</span>,
                <span class="token string">&quot;shella256:2c7498eef94aef8c40d106f3e42f7da62b3eee8fd36012bf7379becc4cd639a2&quot;</span>,
                <span class="token string">&quot;shella256:4eaf0ea085df254fd5d2beba4e2c11db70a620dfa411a8ad44149e26428caee4&quot;</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>,
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><img alt="20210718123636415.png" data-src="https://img.xiaoying.org.cn/img/202309160928318.png" loading="lazy" class="lazy"></p> <p><img alt="2021071812372978.png" data-src="https://img.xiaoying.org.cn/img/202309160928427.png" loading="lazy" class="lazy"></p> <p><img alt="2021071812374035.png" data-src="https://img.xiaoying.org.cn/img/202309160928785.png" loading="lazy" class="lazy"></p> <h3 id="_11-4-提交镜像"><a href="#_11-4-提交镜像" class="header-anchor">#</a> 11.4 提交镜像</h3> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>使用docker commit 命令提交容器成为一个新的版本

<span class="token function">docker</span> commit <span class="token parameter variable">-m</span><span class="token operator">=</span>“提交的描述信息”  <span class="token parameter variable">-a</span><span class="token operator">=</span><span class="token string">&quot;作者&quot;</span> 容器id 目标镜像名:<span class="token punctuation">[</span>TAG<span class="token punctuation">]</span> 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>由于默认的Tomcat镜像的webapps文件夹中没有任何内容，需要从webapps.dist中拷贝文件到webapps文件夹。下面自行制作镜像：就是从webapps.dist中拷贝文件到webapps文件夹下，并提交该镜像作为一个新的镜像。使得该镜像默认的webapps文件夹下就有文件。具体命令如下：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#1.复制文件夹</span>
<span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># docker run -it tomcat /bin/bashell</span>
root@2a3bf3eaa2e4:/usr/local/tomcat<span class="token comment"># cd webapps</span>
root@2a3bf3eaa2e4:/usr/local/tomcat/webapps<span class="token comment"># ls</span>
root@2a3bf3eaa2e4:/usr/local/tomcat/webapps<span class="token comment"># cd ../</span>
root@2a3bf3eaa2e4:/usr/local/tomcat<span class="token comment"># cp -r webapps.dist/* webapps</span>
root@2a3bf3eaa2e4:/usr/local/tomcat<span class="token comment"># cd webapps</span>
root@2a3bf3eaa2e4:/usr/local/tomcat/webapps<span class="token comment"># ls</span>
ROOT  docs  examples  host-manager  manager
<span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># docker ps</span>
CONTAINER ID   IMAGE                 COMMAND        CREATED         STATUS         PORTS                    NAMES
2a3bf3eaa2e4   tomcat                <span class="token string">&quot;/bin/bashell&quot;</span>    <span class="token number">4</span> minutes ago   Up <span class="token number">4</span> minutes   <span class="token number">8080</span>/tcp                 competent_torvalds
7789d4505a00   portainer/portainer   <span class="token string">&quot;/portainer&quot;</span>   <span class="token number">24</span> hours ago    Up <span class="token number">24</span> hours    <span class="token number">0.0</span>.0.0:8088-<span class="token operator">&gt;</span><span class="token number">9000</span>/tcp   quirky_sinoussi
<span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># docker exec -it 2a3bf3eaa2e4 /bin/bashell</span>
root@2a3bf3eaa2e4:/usr/local/tomcat<span class="token comment"># cd webapps</span>
root@2a3bf3eaa2e4:/usr/local/tomcat/webapps<span class="token comment"># ls</span>
ROOT  docs  examples  host-manager  manager
root@2a3bf3eaa2e4:/usr/local/tomcat/webapps<span class="token comment"># cd ../</span>
root@2a3bf3eaa2e4:/usr/local/tomcat<span class="token comment"># read escape sequence</span>
<span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># docker ps</span>
CONTAINER ID   IMAGE                 COMMAND        CREATED         STATUS         PORTS                    NAMES
2a3bf3eaa2e4   tomcat                <span class="token string">&quot;/bin/bashell&quot;</span>    <span class="token number">8</span> minutes ago   Up <span class="token number">8</span> minutes   <span class="token number">8080</span>/tcp                 competent_torvalds
7789d4505a00   portainer/portainer   <span class="token string">&quot;/portainer&quot;</span>   <span class="token number">24</span> hours ago    Up <span class="token number">24</span> hours    <span class="token number">0.0</span>.0.0:8088-<span class="token operator">&gt;</span><span class="token number">9000</span>/tcp   quirky_sinoussi
<span class="token comment">#2.提交镜像作为一个新的镜像</span>

<span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># docker commit -m=&quot;add webapps&quot; -a=&quot;Ethan&quot; 2a3bf3eaa2e4 mytomcat:1.0</span>
shella256:f189aac861de51087af5bc88a5f1de02d9574e7ee2d163c647dd7503a2d3982b
<span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># docker images</span>
REPOSITORY            TAG       IMAGE ID       CREATED         SIZE
mytomcat              <span class="token number">1.0</span>       f189aac861de   <span class="token number">7</span> seconds ago   653MB
mysql                 <span class="token number">5.7</span>       f07dfa83b528   <span class="token number">6</span> days ago      448MB
tomcat                latest    feba8d001e3f   <span class="token number">10</span> days ago     649MB
nginx                 latest    ae2feff98a0c   <span class="token number">12</span> days ago     133MB
centos                latest    300e315adb2f   <span class="token number">2</span> weeks ago     209MB
portainer/portainer   latest    62771b0b9b09   <span class="token number">5</span> months ago    <span class="token number">79</span>.1MB
elasticsearch         <span class="token number">7.6</span>.2     f29a1ee41030   <span class="token number">9</span> months ago    791MB

<span class="token comment">#3.运行容器</span>

<span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># docker run -it mytomcat:1.0 /bin/bashell</span>
root@1645774d4605:/usr/local/tomcat<span class="token comment"># cd webapps</span>
root@1645774d4605:/usr/local/tomcat/webapps<span class="token comment"># ls</span>
ROOT  docs  examples  host-manager  manager
wz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># docker images</span>
REPOSITORY            TAG       IMAGE ID       CREATED         SIZE
mytomcat              <span class="token number">1.0</span>       f189aac861de   <span class="token number">7</span> seconds ago   653MB
mysql                 <span class="token number">5.7</span>       f07dfa83b528   <span class="token number">6</span> days ago      448MB
tomcat                latest    feba8d001e3f   <span class="token number">10</span> days ago     649MB
nginx                 latest    ae2feff98a0c   <span class="token number">12</span> days ago     133MB
centos                latest    300e315adb2f   <span class="token number">2</span> weeks ago     209MB
portainer/portainer   latest    62771b0b9b09   <span class="token number">5</span> months ago    <span class="token number">79</span>.1MB
elasticsearch         <span class="token number">7.6</span>.2     f29a1ee41030   <span class="token number">9</span> months ago    791MB
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br></div></div><h2 id="_12-常用容器部署"><a href="#_12-常用容器部署" class="header-anchor">#</a> 12.常用容器部署</h2> <h3 id="_12-1-nginx部署"><a href="#_12-1-nginx部署" class="header-anchor">#</a> 12.1 Nginx部署</h3> <ol><li>搜索并下载镜像</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># docker search nginx</span>
NAME                               DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED
nginx                              Official build of Nginx.                        <span class="token number">14207</span>     <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>       
jwilder/nginx-proxy                Automated Nginx reverse proxy <span class="token keyword">for</span> <span class="token function">docker</span> con…   <span class="token number">1932</span>                 <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>
richarvey/nginx-php-fpm            Container running Nginx + PHP-FPM capable of…   <span class="token number">797</span>                  <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>
linuxserver/nginx                  An Nginx container, brought to you by LinuxS…   <span class="token number">137</span>                  
jc21/nginx-proxy-manager           Docker container <span class="token keyword">for</span> managing Nginx proxy ho…   <span class="token number">123</span>                  
tiangolo/nginx-rtmp                Docker image with Nginx using the nginx-rtmp…   <span class="token number">107</span>                  <span class="token punctuation">[</span>OK<span class="token punctuation">]</span>
<span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># docker pull nginx</span>
Using default tag: latest
latest: Pulling from library/nginx
6ec7b7d162b2: Already exists 
cb420a90068e: Pull complete 
2766c0bf2b07: Pull complete 
e05167b6a99d: Pull complete 
70ac9d795e79: Pull complete 
Digest: shella256:4cf620a5c81390ee209398ecc18e5fb9dd0f5155cd82adcbae532fec94006fb9
Status: Downloaded newer image <span class="token keyword">for</span> nginx:latest
docker.io/library/nginx:latest
<span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># docker images;</span>
REPOSITORY   TAG       IMAGE ID       CREATED       SIZE
mysql        <span class="token number">5.7</span>       f07dfa83b528   <span class="token number">5</span> days ago    448MB
nginx        latest    ae2feff98a0c   <span class="token number">11</span> days ago   133MB
centos       latest    300e315adb2f   <span class="token number">2</span> weeks ago   209MB
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><p>可以到<a href="https://hub.docker.com/_/nginx" target="_blank" rel="noopener noreferrer">dockerhub官网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>查看Nginx的详细版本信息</p> <ol start="2"><li>运行测试</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> nginx01 <span class="token parameter variable">-p</span> <span class="token number">3334</span>:80 nginx

<span class="token parameter variable">-d</span> 后台运行
<span class="token parameter variable">--name</span> 给容器命名
<span class="token parameter variable">-p</span> <span class="token number">3334</span>:80 将宿主机的端口3334映射到该容器的80端口
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>运行结果：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># docker exec -it nginx01 /bin/bashell</span>
Error: No such container: nginx01
<span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># docker run -d --name nginx01 -p 3334:80 nginx</span>
20c896637ff5de8be835797109d62ee2465e28d9d716be5a8d550ef7d547fcf5
<span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># docker ps</span>
CONTAINER ID   IMAGE     COMMAND                  CREATED         STATUS         PORTS                  NAMES
20c896637ff5   nginx     <span class="token string">&quot;/docker-entrypoint.…&quot;</span>   <span class="token number">7</span> seconds ago   Up <span class="token number">5</span> seconds   <span class="token number">0.0</span>.0.0:3334-<span class="token operator">&gt;</span><span class="token number">80</span>/tcp   nginx01
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>端口暴露的概念</p> <p><img alt="20210718124656411.png" data-src="https://img.xiaoying.org.cn/img/202309160928012.png" loading="lazy" class="lazy"></p> <ol start="3"><li><p>配置文件
进入容器，自定义配置文件</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># docker exec -it nginx01 /bin/bashell</span>
root@20c896637ff5:/<span class="token comment"># whereis nginx</span>
nginx: /usr/sbin/nginx /usr/lib/nginx /etc/nginx /usr/shellare/nginx
root@20c896637ff5:/<span class="token comment"># cd /etc/nginx</span>
root@20c896637ff5:/etc/nginx<span class="token comment"># ls</span>
conf.d	fastcgi_params	koi-utf  koi-win  mime.types  modules  nginx.conf  scgi_params	uwsgi_params  win-utf
root@20c896637ff5:/<span class="token comment"># cd /etc/nginx</span>
root@20c896637ff5:/etc/nginx<span class="token comment"># ls</span>
conf.d	fastcgi_params	koi-utf  koi-win  mime.types  modules  nginx.conf  scgi_params	uwsgi_params  win-utf
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li> <li><p>访问测试
本地主机访问测试，curl命令发起请求，如果使用阿里云服务器需要设置安全组。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># docker ps</span>
CONTAINER ID   IMAGE     COMMAND                  CREATED         STATUS         PORTS                  NAMES
20c896637ff5   nginx     <span class="token string">&quot;/docker-entrypoint.…&quot;</span>   <span class="token number">7</span> minutes ago   Up <span class="token number">7</span> minutes   <span class="token number">0.0</span>.0.0:3334-<span class="token operator">&gt;</span><span class="token number">80</span>/tcp   nginx01
<span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># curl localhost:3334</span>
<span class="token operator">&lt;</span><span class="token operator">!</span>DOCTYPE html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Welcome to nginx<span class="token operator">!</span><span class="token operator">&lt;</span>/title<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>style<span class="token operator">&gt;</span>
    body <span class="token punctuation">{</span>
        width: 35em<span class="token punctuation">;</span>
        margin: <span class="token number">0</span> auto<span class="token punctuation">;</span>
        font-family: Tahoma, Verdana, Arial, sans-serif<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token operator">&lt;</span>/style<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/head<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>Welcome to nginx<span class="token operator">!</span><span class="token operator">&lt;</span>/h<span class="token operator"><span class="token file-descriptor important">1</span>&gt;</span>
<span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>If you see this page, the nginx web server is successfully installed and
working. Further configuration is required.<span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>For online documentation and support please refer to
<span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">&quot;http://nginx.org/&quot;</span><span class="token operator">&gt;</span>nginx.org<span class="token operator">&lt;</span>/a<span class="token operator">&gt;</span>.<span class="token operator">&lt;</span>br/<span class="token operator">&gt;</span>
Commercial support is available at
<span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">&quot;http://nginx.com/&quot;</span><span class="token operator">&gt;</span>nginx.com<span class="token operator">&lt;</span>/a<span class="token operator">&gt;</span>.<span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token operator">&lt;</span>em<span class="token operator">&gt;</span>Thank you <span class="token keyword">for</span> using nginx.<span class="token operator">&lt;</span>/em<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/p<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/body<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>/html<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div></li> <li><p>安装vim</p> <p>我们使用Nginx往往需要编写配置文件，但是Nginx官方镜像没有安装vim，需要我们手动进行安装。使用以下命令进行安装：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#检查是否已安装</span>
<span class="token function">rpm</span> -qa<span class="token operator">|</span><span class="token function">grep</span> <span class="token function">vim</span>
<span class="token comment">#如果已安装，会显示：</span>
<span class="token punctuation">[</span>root@localhost usr<span class="token punctuation">]</span><span class="token comment"># rpm -qa|grep vim</span>
vim-minimal-7.4.629-6.el7.x86_64
vim-filesystem-7.4.629-6.el7.x86_64
vim-enhanced-7.4.629-6.el7.x86_64
vim-common-7.4.629-6.el7.x86_64
vim-X11-7.4.629-6.el7.x86_64
<span class="token comment">#安装</span>
<span class="token comment">#如果缺少了其中某个，比如说： vim-enhanced这个包少了，则执行：</span>
yum <span class="token parameter variable">-y</span> <span class="token function">install</span> vim-enhanced
<span class="token comment">#它会自动下载安装。如果上面三个包一个都没有显示，则直接输入命令：</span>
yum <span class="token parameter variable">-y</span> <span class="token function">install</span> vim*
<span class="token comment">#配置</span>
<span class="token function">vim</span> /etc/vimrc
<span class="token comment">#打开文件后，按 i 进入编辑模式，然后找一个位置添加如下代码</span>
<span class="token builtin class-name">set</span> nu          <span class="token string">&quot; 设置显示行号
set shellowmode    &quot;</span> 设置在命令行界面最下面显示当前模式等
<span class="token builtin class-name">set</span> ruler       <span class="token string">&quot; 在右下角显示光标所在的行数等信息
set autoindent  &quot;</span> 设置每次单击Enter键后，光标移动到下一行时与上一行的起始字符对齐
syntax on       &quot; 即设置语法检测，当编辑C或者shellell脚本时，关键字会用特殊颜色显示
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><p>ps: <strong>由于到目前为止还没学到数据卷，具体的设置以及编写配置文件，你可以先到后面了解一下数据卷，再来编写配置文件</strong></p></li></ol> <h3 id="_12-2-tomcat的部署"><a href="#_12-2-tomcat的部署" class="header-anchor">#</a> 12.2 Tomcat的部署</h3> <ol><li><p>下载并运行</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># docker pull tomcat</span>
Using default tag: latest
latest: Pulling from library/tomcat
6c33745f49b4: Pull complete 
ef072fc32a84: Pull complete 
c0afb8e68e0b: Pull complete 
d599c07d28e6: Pull complete 
e8a829023b97: Pull complete 
d04be46a31d1: Pull complete 
db6007c69c35: Pull complete 
e4ad4c894bce: Pull complete 
248895fda357: Pull complete 
277059b4cba2: Pull complete 
Digest: shella256:57dae7dfb9b62a413cde65334c8a18893795cac70afc3be589c8336d8244655d
Status: Downloaded newer image <span class="token keyword">for</span> tomcat:latest
docker.io/library/tomcat:latest
<span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># docker run -d -p 3335:8080 --name tomcat01 tomcat</span>
7136295a6082cb0f805b025a1471bde02ead4864be3e2c9dcd337b1dde0a3113
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div></li> <li><p>进入容器</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># docker exec -it tomcat01 /bin/bashell</span>
root@7136295a6082:/usr/local/tomcat<span class="token comment"># ls</span>
BUILDING.txt  CONTRIBUTING.md  LICENSE	NOTICE	README.md  RELEASE-NOTES  RUNNING.txt  bin  conf  lib  logs  native-jni-lib  temp  webapps  webapps.dist  work
root@7136295a6082:/usr/local/tomcat<span class="token comment"># cd webapps.dist</span>
root@7136295a6082:/usr/local/tomcat/webapps.dist<span class="token comment"># ls</span>
ROOT  docs  examples  host-manager  manager
root@7136295a6082:/usr/local/tomcat/webapps.dist<span class="token comment"># cd ROOT</span>
root@7136295a6082:/usr/local/tomcat/webapps.dist/ROOT<span class="token comment"># ls</span>
RELEASE-NOTES.txt  WEB-INF  asf-logo-wide.svg  bg-button.png  bg-middle.png  bg-nav.png  bg-upper.png  favicon.ico  index.jsp  tomcat.css  tomcat.svg
root@7136295a6082:/usr/local/tomcat/webapps.dist/ROOT<span class="token comment"># cd ../../</span>
root@7136295a6082:/usr/local/tomcat<span class="token comment"># cd webapps</span>
root@7136295a6082:/usr/local/tomcat/webapps<span class="token comment"># ls</span>
root@7136295a6082:/usr/local/tomcat/webapps<span class="token comment"># cp -r /usr/local/tomcat/webapps.dist/* /usr/local/tomcat/webapps/</span>
root@7136295a6082:/usr/local/tomcat/webapps<span class="token comment"># ls</span>
ROOT  docs  examples  host-manager  manager
root@7136295a6082:/usr/local/tomcat/webapps<span class="token comment"># exit</span>
<span class="token builtin class-name">exit</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></li> <li><p>访问测试</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>root@iZwz99sm8v95sckz8bd2c4Z ~<span class="token punctuation">]</span><span class="token comment"># curl localhost:3335</span>

<span class="token operator">&lt;</span><span class="token operator">!</span>DOCTYPE html<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>html <span class="token assign-left variable">lang</span><span class="token operator">=</span><span class="token string">&quot;en&quot;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>head<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>meta <span class="token assign-left variable">charset</span><span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span> /<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>title<span class="token operator">&gt;</span>Apache Tomcat/9.0.4<span class="token operator"><span class="token file-descriptor important">1</span>&lt;</span>/title<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>link <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">&quot;favicon.ico&quot;</span> <span class="token assign-left variable">rel</span><span class="token operator">=</span><span class="token string">&quot;icon&quot;</span> <span class="token assign-left variable">type</span><span class="token operator">=</span><span class="token string">&quot;image/x-icon&quot;</span> /<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>link <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">&quot;tomcat.css&quot;</span> <span class="token assign-left variable">rel</span><span class="token operator">=</span><span class="token string">&quot;styleshelleet&quot;</span> <span class="token assign-left variable">type</span><span class="token operator">=</span><span class="token string">&quot;text/css&quot;</span> /<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>/head<span class="token operator">&gt;</span>

    <span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>div <span class="token assign-left variable">id</span><span class="token operator">=</span><span class="token string">&quot;wrapper&quot;</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div <span class="token assign-left variable">id</span><span class="token operator">=</span><span class="token string">&quot;navigation&quot;</span> <span class="token assign-left variable">class</span><span class="token operator">=</span><span class="token string">&quot;curved container&quot;</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>span <span class="token assign-left variable">id</span><span class="token operator">=</span><span class="token string">&quot;nav-home&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">&quot;https://tomcat.apache.org/&quot;</span><span class="token operator">&gt;</span>Home<span class="token operator">&lt;</span>/a<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/span<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>span <span class="token assign-left variable">id</span><span class="token operator">=</span><span class="token string">&quot;nav-hosts&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">&quot;/docs/&quot;</span><span class="token operator">&gt;</span>Documentation<span class="token operator">&lt;</span>/a<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/span<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>span <span class="token assign-left variable">id</span><span class="token operator">=</span><span class="token string">&quot;nav-config&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">&quot;/docs/config/&quot;</span><span class="token operator">&gt;</span>Configuration<span class="token operator">&lt;</span>/a<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/span<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>span <span class="token assign-left variable">id</span><span class="token operator">=</span><span class="token string">&quot;nav-examples&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">&quot;/examples/&quot;</span><span class="token operator">&gt;</span>Examples<span class="token operator">&lt;</span>/a<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/span<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>span <span class="token assign-left variable">id</span><span class="token operator">=</span><span class="token string">&quot;nav-wiki&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">&quot;https://wiki.apache.org/tomcat/FrontPage&quot;</span><span class="token operator">&gt;</span>Wiki<span class="token operator">&lt;</span>/a<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/span<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>span <span class="token assign-left variable">id</span><span class="token operator">=</span><span class="token string">&quot;nav-lists&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">&quot;https://tomcat.apache.org/lists.html&quot;</span><span class="token operator">&gt;</span>Mailing Lists<span class="token operator">&lt;</span>/a<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/span<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>span <span class="token assign-left variable">id</span><span class="token operator">=</span><span class="token string">&quot;nav-help&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>a <span class="token assign-left variable">href</span><span class="token operator">=</span><span class="token string">&quot;https://tomcat.apache.org/findhelp.html&quot;</span><span class="token operator">&gt;</span>Find Help<span class="token operator">&lt;</span>/a<span class="token operator">&gt;</span><span class="token operator">&lt;</span>/span<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>br <span class="token assign-left variable">class</span><span class="token operator">=</span><span class="token string">&quot;separator&quot;</span> /<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>/div<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div></li></ol> <h3 id="_12-3-elasticsearch部署"><a href="#_12-3-elasticsearch部署" class="header-anchor">#</a> 12.3 ElasticSearch部署</h3> <h4 id="安装elasticsearch并部署"><a href="#安装elasticsearch并部署" class="header-anchor">#</a> 安装elasticsearch并部署</h4> <ol><li><p>拉取Elasticsearch镜像</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> pull elasticsearch:7.7.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ol> <p><img alt="21782a576ca644869ba50165184f056e.png" data-src="https://img.xiaoying.org.cn/img/202309160928208.png" loading="lazy" class="lazy"></p> <p>查看镜像命令：docker images
删除镜像命令：<code>docker rmi &lt;镜像名:版本号&gt;</code> or docker rmi &lt;镜像id&gt;
<img alt="77d67f2c1f404c4286eefca7e5c8c5cd.png" data-src="https://img.xiaoying.org.cn/img/202309160928224.png" loading="lazy" class="lazy"></p> <ol start="2"><li><p>启动前准备
创建存放数据及配置文件的文件夹，启动时挂载。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">mkdir</span> <span class="token parameter variable">-p</span>  /home/elasticsearch/data/ 
<span class="token function">mkdir</span> <span class="token parameter variable">-p</span>  /home/elasticsearch/config/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ol> <p><img alt="962ad3c43cd24b75bdec7a75e971efdb.png" data-src="https://img.xiaoying.org.cn/img/202309160928248.png" loading="lazy" class="lazy"></p> <p><strong>解释</strong>：</p> <ul><li>-p： 参数来创建多级文件夹</li> <li>tree：以树形结构展示文件目录</li></ul> <p><strong>编写配置文件</strong></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">echo</span> <span class="token string">'http.host: 0.0.0.0
http.cors.enabled: true
http.cors.allow-origin: &quot;*&quot; '</span><span class="token operator">&gt;&gt;</span>/home/elasticsearch/config/elasticsearch.yml
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img alt="c0bc056bc3764c0a8689691c25889aa5.png" data-src="https://img.xiaoying.org.cn/img/202309160928416.png" loading="lazy" class="lazy"></p> <p>解释：</p> <ul><li><p>echo &gt;&gt; ：是利用了shellell编程语法，使用echo &gt;&gt;指令向文件追加内容，原内容将保存</p> <ul><li>使用 &gt; 指令的话就是覆盖文件原内容并重新输入内容，若文件不存在则创建文件。</li></ul></li> <li><p>cat：展示文件内容。</p></li> <li><p><code>http.cors.enabled: true</code> 和<code>http.cors.allow-origin: &quot;*&quot;</code>配置是为了解决跨域问题，因为等下还要下载可视化工具查看。</p></li></ul> <p>修改文件夹权限</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">chmod</span> <span class="token parameter variable">-R</span> <span class="token number">777</span> /home/elasticsearch/
<span class="token function">ls</span> <span class="token parameter variable">-l</span> <span class="token comment"># 查看文件权限</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img alt="789f7ed4c5134540994ce1bfabcfd7b5.png" data-src="https://img.xiaoying.org.cn/img/202309160928461.png" loading="lazy" class="lazy"></p> <ol start="3"><li><p>启动elasticseach镜像</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> run <span class="token parameter variable">--name</span> elasticsearch <span class="token parameter variable">-p</span> <span class="token number">9200</span>:9200 <span class="token punctuation">\</span>
 <span class="token parameter variable">-p</span> <span class="token number">9300</span>:9300 <span class="token punctuation">\</span>
 <span class="token parameter variable">-e</span> <span class="token string">&quot;discovery.type=single-node&quot;</span> <span class="token punctuation">\</span>
 <span class="token parameter variable">-e</span> <span class="token assign-left variable">ES_JAVA_OPTS</span><span class="token operator">=</span><span class="token string">&quot;-Xms64m -Xmx128m&quot;</span> <span class="token punctuation">\</span>
  <span class="token parameter variable">-v</span> /home/elasticsearch/config/elasticsearch.yml:/usr/shellare/elasticsearch/config/elasticsearch.yml <span class="token punctuation">\</span>
 <span class="token parameter variable">-v</span> /home/elasticsearch/data:/usr/shellare/elasticsearch/data <span class="token punctuation">\</span>
 <span class="token parameter variable">-v</span> /home/elasticsearch/plugins:/usr/shellare/elasticsearch/plugins <span class="token punctuation">\</span>
 <span class="token parameter variable">-d</span> elasticsearch:7.7.0
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>参数解释：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token parameter variable">--name</span> elasticsearch：将容器命名为 elasticsearch
<span class="token parameter variable">-p</span> <span class="token number">9200</span>:9200：将容器的9200端口映射到宿主机9200端口
<span class="token parameter variable">-p</span> <span class="token number">9300</span>:9300：将容器的9300端口映射到宿主机9300端口，目的是集群互相通信
<span class="token parameter variable">-e</span> <span class="token string">&quot;discovery.type=single-node&quot;</span>：单例模式
<span class="token parameter variable">-e</span> <span class="token assign-left variable">ES_JAVA_OPTS</span><span class="token operator">=</span><span class="token string">&quot;-Xms64m -Xmx128m&quot;</span>：配置内存大小
<span class="token parameter variable">-v</span> /mydata/elasticsearch/config/elasticsearch.yml:/usr/shellare/elasticsearch/config/elasticsearch.yml：将配置文件挂载到宿主机
<span class="token parameter variable">-v</span> /mydata/elasticsearch/data:/usr/shellare/elasticsearch/data：将数据文件夹挂载到宿主机
<span class="token parameter variable">-v</span> /mydata/elasticsearch/plugins:/usr/shellare/elasticsearch/plugins：将插件目录挂载到宿主机<span class="token punctuation">(</span>需重启<span class="token punctuation">)</span>
<span class="token parameter variable">-d</span> elasticsearch:7.7.0：后台运行容器，并返回容器ID
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>执行结果：</p></li></ol> <p><img alt="0051149a31544ce9bcc6dd0c609f951c.png" data-src="https://img.xiaoying.org.cn/img/202309160928713.png" loading="lazy" class="lazy"></p> <p>接下来我们就是拿浏览器访问啦。</p> <p>在浏览器上输入：<code>服务器IP地址:9200</code></p> <ol start="4"><li><p>可能出现的问题</p> <ul><li><p>启动成功，但是访问失败的话，查看一下安全组中映射端口是否已经打开。如果是本地虚拟机，可能与防火墙相关（我用的云服务器，没有测试，如果有问题，还是需要大家自行去百度||谷歌一下）。</p></li> <li><p>-e ES_JAVA_OPTS=&quot;-Xms64m -Xmx128m&quot;：配置内存大小出现了问题。（可试着调一下，docker玩不坏的，莫慌）</p></li> <li><p>最后就还有可能是配置文件中出现了问题。</p></li></ul></li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">echo</span> <span class="token string">'http.host: 0.0.0.0
http.cors.enabled: true
http.cors.allow-origin: &quot;*&quot; '</span><span class="token operator">&gt;&gt;</span>/home/elasticsearch/config/elasticsearch.yml
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>http.host: 0.0.0.0</code> 在冒号后面有一个空格的，这里的配置文件是<code>yml</code>格式,所以一定要严格按照<code>yml</code>格式来书写。</p> <ol start="5"><li><p>为Elasticsearch安装ik分词器</p> <p>分词:即把一段中文或者别的划分成一个个的关键字,我们在搜索时候会把自己的信息进行分词,会把数据库中或者索引库中的数据进行分词,然后进行一个匹配操作,默认的中文分词器是将每个字看成一个词,比如&quot;我爱技术&quot;会被分为&quot;我&quot;,“爱”,“技”,“术”。</p></li></ol> <p><img alt="77f584371974494aa1cd13d571f4a814.png" data-src="https://img.xiaoying.org.cn/img/202309160928792.png" loading="lazy" class="lazy"></p> <p>结果：</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;tokens&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;token&quot;</span><span class="token operator">:</span> <span class="token string">&quot;我&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;start_offset&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token property">&quot;end_offset&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;IDEOGRAPHIC&gt;&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;position&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;token&quot;</span><span class="token operator">:</span> <span class="token string">&quot;爱&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;start_offset&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token property">&quot;end_offset&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;IDEOGRAPHIC&gt;&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;position&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;token&quot;</span><span class="token operator">:</span> <span class="token string">&quot;技&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;start_offset&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
            <span class="token property">&quot;end_offset&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;IDEOGRAPHIC&gt;&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;position&quot;</span><span class="token operator">:</span> <span class="token number">2</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;token&quot;</span><span class="token operator">:</span> <span class="token string">&quot;术&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;start_offset&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
            <span class="token property">&quot;end_offset&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&lt;IDEOGRAPHIC&gt;&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;position&quot;</span><span class="token operator">:</span> <span class="token number">3</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>这显然不符合要求,所以我们需要安装中文分词器IK来解决这个问题</p> <p>IK提供了两个分词算法:<code>ik_smart</code>和<code>ik_max_word</code></p> <p>其中<code>ik_smart</code>为最少切分,<code>ik_max_word</code>为最细粒度划分</p> <h4 id="安装ik分词器"><a href="#安装ik分词器" class="header-anchor">#</a> 安装ik分词器</h4> <p>进入已经启动成功的elasticsearch容器。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> elasticsearch /bin/bashell
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img alt="6bb212d2660941619b6b47902d2fb3b5.png" data-src="https://img.xiaoying.org.cn/img/202309160928960.png" loading="lazy" class="lazy"></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>./bin/elasticsearch-plugin <span class="token function">install</span> https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v7.7.0/elasticsearch-analysis-ik-7.7.0.zip
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>ps: <strong>安装的ik分词器的版本一定要与elasticsearch的版本保持一致</strong></p> <p><img alt="57a832d36b07437098afc687112f8540.png" data-src="https://img.xiaoying.org.cn/img/202309160928012.png" loading="lazy" class="lazy"></p> <p>下载过程中会出现这个问题，直接输入 y回车就可以了。
<img alt="57ec3132e7084cc89d32d4a784fc9405.png" data-src="https://img.xiaoying.org.cn/img/202309160928023.png" loading="lazy" class="lazy"></p> <p>下载完成之后，退出去，重新启动elasticsearch容器。</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> restart elasticsearch <span class="token comment">#  &lt;容器名o容器id&gt;   重启容器命令</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img alt="89c033d3379b4fbfb8191fc0385a8534.png" data-src="https://img.xiaoying.org.cn/img/202309160928062.png" loading="lazy" class="lazy"></p> <p>测试ik分词器是否安装成功</p> <p>安装完成后，我们再来进行测试遍，看看有什么样的变化。</p> <p>postman post请求分词测试：<code>http://服务器IP地址:9200/_analyze</code></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;tokenizer&quot;</span><span class="token operator">:</span><span class="token string">&quot;ik_smart&quot;</span><span class="token punctuation">,</span><span class="token comment">// 分词器不同，这个地方也会有变化 具体的可能还需要去学习。</span>
	<span class="token property">&quot;text&quot;</span><span class="token operator">:</span><span class="token string">&quot;我爱技术&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><img alt="0e2bda8bee7440fe9911b786c9a29363.png" data-src="https://img.xiaoying.org.cn/img/202309160928329.png" loading="lazy" class="lazy"></p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;tokens&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;token&quot;</span><span class="token operator">:</span> <span class="token string">&quot;我&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;start_offset&quot;</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            <span class="token property">&quot;end_offset&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CN_CHAR&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;position&quot;</span><span class="token operator">:</span> <span class="token number">0</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;token&quot;</span><span class="token operator">:</span> <span class="token string">&quot;爱&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;start_offset&quot;</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token property">&quot;end_offset&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CN_CHAR&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;position&quot;</span><span class="token operator">:</span> <span class="token number">1</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;token&quot;</span><span class="token operator">:</span> <span class="token string">&quot;技术&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;start_offset&quot;</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
            <span class="token property">&quot;end_offset&quot;</span><span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">,</span>
            <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;CN_WORD&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;position&quot;</span><span class="token operator">:</span> <span class="token number">2</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h4 id="安装elasticsearch可视化工具"><a href="#安装elasticsearch可视化工具" class="header-anchor">#</a> 安装Elasticsearch可视化工具</h4> <p><code>Elasticsearch</code>可视化工具有多种，可以根据自己的喜好进行选择，我这里使用的是<code>mobz/elasticsearch-head:5</code>而已。</p> <ol><li>拉取镜像</li></ol> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> pull mobz/elasticsearch-head:5
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><img alt="533b907f8094484e94e7ede928bc80d2.png" data-src="https://img.xiaoying.org.cn/img/202309160928425.png" loading="lazy" class="lazy"></p> <ol start="2"><li><p>启动镜像</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> elasticsearch-head <span class="token parameter variable">-p</span> <span class="token number">9100</span>:9100 mobz/elasticsearch-head:5
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ol> <p><img alt="3576fd4f048b46c5bdc241d09facd478.png" data-src="https://img.xiaoying.org.cn/img/202309160928543.png" loading="lazy" class="lazy"></p> <ol start="3"><li><p>测试</p> <p>我们在浏览器访问：http://服务器IP:9100/
<img alt="746009504f2a4c9fb2c18e15095eec32.png" data-src="https://img.xiaoying.org.cn/img/202309160928652.png" loading="lazy" class="lazy"></p></li> <li><p>可能出现的问题</p> <p>elasticsearch配置文件elasticsearch.yml中 缺少了下列跨域配置</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>http.cors.enabled: <span class="token boolean">true</span> 
http.cors.allow-origin: <span class="token string">&quot;*&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ol> <h3 id="_12-4-mysql的部署"><a href="#_12-4-mysql的部署" class="header-anchor">#</a> 12.4 MySQL的部署</h3> <ol><li><p>下载并运行</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#拉取并运行容器</span>
<span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">--name</span> mysql-5.7 <span class="token parameter variable">-p</span> <span class="token number">3306</span>:3306 <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span> mysql:5.7
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>参数说明：</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token parameter variable">-p</span> <span class="token number">3306</span>:3306 ：映射容器服务的 <span class="token number">3306</span> 端口到宿主机的 <span class="token number">3306</span> 端口，外部主机可以直接通过 宿主机ip:3306 访问到 MySQL 的服务。
<span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">123456</span>：设置 MySQL 服务 默认账号root 用户的密码。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p>进入容器查看mysql服务</p> <p>进入容器，并通过账号root查看MySQL服务能否正常连接</p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> 9b3aad6819ff /bin/bashell
mysql <span class="token parameter variable">-h</span> localhost <span class="token parameter variable">-u</span> root <span class="token parameter variable">-p</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ol> <p><img alt="1063e7abc3b9453e8962e2c80de648d1.png" data-src="https://img.xiaoying.org.cn/img/202309160928813.png" loading="lazy" class="lazy"></p></div></div> <!----> <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=%E5%90%8E%E7%AB%AF" title="标签">#后端</a><a href="/tags/?tag=Docker" title="标签">#Docker</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2026/01/18 20:44:55</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/c853f2/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">TrueLicense 创建及安装证书</div></a> <a href="/pages/74f6d1/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Docker部署前后端分离项目</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/c853f2/" class="prev">TrueLicense 创建及安装证书</a></span> <span class="next"><a href="/pages/74f6d1/">Docker部署前后端分离项目</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/24af07/"><div>
            Chrome开启GeminiAI
            <span class="title-tag">
              原创
            </span></div></a> <span class="date">02-04</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/2e0a98/"><div>
            暂停windows更新
            <span class="title-tag">
              原创
            </span></div></a> <span class="date">07-30</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/eff348/"><div>
            关联到已存在的 GitHub 仓库
            <span class="title-tag">
              原创
            </span></div></a> <span class="date">07-28</span></dt></dl><dl><dd>04</dd> <dt><a href="/pages/f02c4b/"><div>
            numpy
            <span class="title-tag">
              原创
            </span></div></a> <span class="date">07-24</span></dt></dl><dl><dd>05</dd> <dt><a href="/pages/cf83bf/"><div>
            pandas 基础操作
            <span class="title-tag">
              原创
            </span></div></a> <span class="date">07-24</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="https://github.com/xugaoyi/vuepress-theme-vdoing" title="github" target="_blank" class="iconfont icon-github"></a><a href="https://mail.163.com/js6/main.jsp?sid=YAoleRcXgSntbqVGwDXXGltbASZPXVBD&amp;df=mail163_letter#module=compose.ComposeModule%7C%7B%22type%22%3A%22compose%22%2C%22fullScreen%22%3Atrue%2C%22cid%22%3A%22c%3A1702008591824%22%7D" title="邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://qm.qq.com/q/1qZrTBvhuU" title="QQ" target="_blank" class="iconfont icon-QQ"></a><a href=" https://b23.tv/XXqWiXR" title="哔哩哔哩" target="_blank" class="iconfont icon-bilibili"></a></div> 
    Copyright © 2023-2026
    <span><a target="_blank" href="https://github.com/liyao52033/vuepress-default">liyao52033</a>&nbsp;&nbsp;All Rights Reserved<br>备案号：<a target="_blank" href="https://beian.miit.gov.cn/">鄂ICP备2023023964号-1</a>&nbsp;&nbsp;&nbsp;&nbsp;</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"><div></div><div></div><div id="twikoo"></div></div></div>
    <script src="/assets/js/app.07bb8812.js" defer></script><script src="/assets/js/4.74e8e892.js" defer></script><script src="/assets/js/1.97c589b9.js" defer></script><script src="/assets/js/3.b578a44e.js" defer></script><script src="/assets/js/90.183556a5.js" defer></script><script src="/assets/js/25.7ae8a124.js" defer></script><script src="/assets/js/45.ffc06b3f.js" defer></script>
  </body>
</html>
