(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{575:function(a,t,i){"use strict";i.r(t);var s=i(3),g=Object(s.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("p",[a._v("调试网页和 Node.js 的代码，可以在代码某一行打个断点，代码执行到这里的时候就会断住，可以看它的作用域、调用栈等。")]),a._v(" "),t("p",[a._v("但有的时候，我们并不知道应该在哪里打断点：")]),a._v(" "),t("p",[a._v("比如代码抛了异常，你想打个断点看看异常出现的原因，但你并不知道异常在哪里发生的。")]),a._v(" "),t("p",[a._v("比如 dom 被某个地方修改了，你想打个断点看看怎么修改的，但你并不知道是哪段代码修改了它。")]),a._v(" "),t("p",[a._v("比如有的断点你想只在满足某个条件的时候断住，不满足条件就不需要断住。")]),a._v(" "),t("p",[a._v("类似的情况有很多，需要断住，但是普通的断点又不大合适，这时候就需要其他的断点类型了。")]),a._v(" "),t("p",[a._v("我们分别来看一下：")]),a._v(" "),t("h2",{attrs:{id:"异常断点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#异常断点"}},[a._v("#")]),a._v(" 异常断点")]),a._v(" "),t("p",[a._v("代码抛了异常，你想知道在哪抛的，这时候就可以用异常断点。")]),a._v(" "),t("p",[a._v("比如这样一段代码：")]),a._v(" "),t("p",[a._v("function add(a, b) {    throw Error('add');    return a + b;     } console.log(add(1, 2));")]),a._v(" "),t("p",[a._v("add 函数里抛了个异常，你想在异常处断住，这时候就可以加个异常断点：")]),a._v(" "),t("p",[a._v("用 node 的调试来跑：")]),a._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://img.xiaoying.org.cn/img/20251004140849310.png",loading:"lazy"}})]),a._v(" "),t("p",[a._v("勾选 Uncaught Exceptions：")]),a._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://img.xiaoying.org.cn/img/20251004140857948.png",loading:"lazy"}})]),a._v(" "),t("p",[a._v("它可以在没有被处理的错误或者 Promise 的 reject 处断住。")]),a._v(" "),t("p",[a._v("上面那个 Caught Exception 是在被 catch 处理的异常出断住。")]),a._v(" "),t("p",[a._v("Uncaught Exceptions 更常用一些。")]),a._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://img.xiaoying.org.cn/img/20251004140910412.gif",loading:"lazy"}}),a._v("当然，网页调试也可以用异常断点：")]),a._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://img.xiaoying.org.cn/img/20251004140920726.gif",loading:"lazy"}})]),a._v(" "),t("p",[a._v("示例代码比较简单，很多时候代码抛了错你不知道哪里抛的，就可以用异常断点来找原因，断住以后看看调用栈啥的。")]),a._v(" "),t("h2",{attrs:{id:"条件断点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#条件断点"}},[a._v("#")]),a._v(" 条件断点")]),a._v(" "),t("p",[a._v("有的时候我们只想在满足一定条件的时候才断住，这时候就可以用条件断点：")]),a._v(" "),t("p",[a._v("在代码左边打断点的地方右键单击，就可以选择条件断点：")]),a._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://img.xiaoying.org.cn/img/20251004140959429.png",loading:"lazy"}})]),a._v(" "),t("p",[a._v("添加一个表达式，比如我只想在 a 等于 3 的时候断住：")]),a._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"FnRJrFYXZbvAZZvykLkxOAFHevZs","data-src":"https://img.xiaoying.org.cn/img/20251004141000945.webp",loading:"lazy"}}),a._v("跑下 node 调试，你会发现这段代码虽然执行了两次，但只断住了一次：")]),a._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"Fp2Mom61b4s0KTfDxEfPuesmsGo3","data-src":"https://img.xiaoying.org.cn/img/20251004141008850.gif",loading:"lazy"}}),a._v("条件断点在网页调试也是支持的：")]),a._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"1693894046252","data-src":"https://img.xiaoying.org.cn/img/20251004141034458.gif",loading:"lazy"}}),a._v("不知道相关代码具体在哪时，也可以直接在事件监听器时选择对应的事件，比如常见的失去焦点元素消失时就可在控制里勾选blur，然后输入框中输入，失去焦点程序会暂停执行，这样可调整这部分的具体样式")]),a._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"1693451645186","data-src":"https://img.xiaoying.org.cn/img/20251004141033142.webp",loading:"lazy"}})]),a._v(" "),t("h2",{attrs:{id:"logpoint"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#logpoint"}},[a._v("#")]),a._v(" LogPoint")]),a._v(" "),t("p",[a._v("当你觉得断住次数太多了，太麻烦，不想在断点处断住，但却想看下这时候的值，你是不是会选择加一个 console.log 呢？")]),a._v(" "),t("p",[a._v("绝大部分同学是这样的，但其实有更好的方式。")]),a._v(" "),t("p",[a._v("添加一个 LogPoint：")]),a._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"1693895780929","data-src":"https://img.xiaoying.org.cn/img/20251004141040905.jpeg",loading:"lazy"}})]),a._v(" "),t("p",[a._v("输入打印的表达式：")]),a._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"FuktPTX56EtPknbVNJu34kB5kmoi","data-src":"https://img.xiaoying.org.cn/img/20251004141114396.webp",loading:"lazy"}}),a._v("跑一下 node 调试，你会发现打印了日志，但没有断住：")]),a._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"FjbYWPMpZlUk7Vf-FOlXj9g7tHwH","data-src":"https://img.xiaoying.org.cn/img/20251004141125388.gif",loading:"lazy"}}),a._v("网页调试里也是支持 LogPoint 的：")]),a._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"FlVnsBBZYbCYD6923TtO7CJznO5F","data-src":"https://img.xiaoying.org.cn/img/20251004141131287.gif",loading:"lazy"}}),a._v("打印了调试用的日志，但没有污染代码，这不比 console.log 香么？")]),a._v(" "),t("h2",{attrs:{id:"dom-断点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dom-断点"}},[a._v("#")]),a._v(" DOM 断点")]),a._v(" "),t("p",[a._v("后面几种断点是网页里专用的，也是在特定场景下很有用的断点类型。")]),a._v(" "),t("p",[a._v("用 create-react-app 创建的 react 项目，有这样一个组件：")]),a._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"Fl741FjbyDcEYNbbF5sIugtbvDG-","data-src":"https://img.xiaoying.org.cn/img/20251004141134676.webp",loading:"lazy"}})]),a._v(" "),t("p",[a._v("我们想知道 setState 之后是怎么修改 DOM 的，想在 DOM 被修改的时候断住，应该怎么做呢？")]),a._v(" "),t("p",[a._v("找到源码打断点么？")]),a._v(" "),t("p",[a._v("不熟悉源码的话，你根本不知道在哪里打断点。")]),a._v(" "),t("p",[a._v("这时候就可以用 DOM 断点了：")]),a._v(" "),t("p",[a._v("我先创建一个 chrome 调试配置，把网页跑起来：")]),a._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"Fpb2TtwF9tpY8S1q0rq0BDHG9XZ7","data-src":"https://img.xiaoying.org.cn/img/20251004141136631.webp",loading:"lazy"}}),a._v("然后打开 Chrome DevTools，在 root 的节点上加一个 DOM 断点：")]),a._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"FridHgaxUZmB6sY8Po8aw5TVRDZH","data-src":"https://img.xiaoying.org.cn/img/20251004141142248.webp",loading:"lazy"}}),a._v("有三种类型，子树修改的时候断住、属性修改的时候断住、节点删除的时候断住。")]),a._v(" "),t("p",[a._v("我们选择第一种，然后刷新页面。")]),a._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"lvVCwWxhXjM59H-ywwYn_mjHTY2x","data-src":"https://img.xiaoying.org.cn/img/20251004141152145.gif",loading:"lazy"}}),a._v("这时候你会发现代码在修改 DOM 的地方断住了，这就是 React 源码里最终操作 DOM 的地方，看下调用栈就知道 setState 之后是如何更新 DOM 的了。")]),a._v(" "),t("p",[a._v("当然这只是一种用途，特定场景下，DOM 断点是很有用的。")]),a._v(" "),t("h2",{attrs:{id:"event-listener-断点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#event-listener-断点"}},[a._v("#")]),a._v(" Event Listener 断点")]),a._v(" "),t("p",[a._v("之前我们想调试事件发生之后的处理逻辑，需要找到事件监听器，然后打个断点。")]),a._v(" "),t("p",[a._v("但如果你不知道哪里处理的这个事件呢？")]),a._v(" "),t("p",[a._v("这时候就可以用事件断点了：")]),a._v(" "),t("p",[a._v("打开 sources 面板，就可以找到事件断点，有各种类型的事件：")]),a._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"FqF7QpMbylJTGgahThb8Kf2TbpZM","data-src":"https://img.xiaoying.org.cn/img/20251004141154377.webp",loading:"lazy"}}),a._v("比如这样一段代码：")]),a._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"Fp77lZgEOF9_ngUtLhTvZ54tWxZZ","data-src":"https://img.xiaoying.org.cn/img/20251004141157142.webp",loading:"lazy"}}),a._v("你找不到哪里处理的点击事件，那就可以加一个 click 的事件断点：")]),a._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"FkgSCRY-AS7UXswkOuTos1nMKHL-","data-src":"https://img.xiaoying.org.cn/img/20251004141205155.webp",loading:"lazy"}})]),a._v(" "),t("p",[a._v("这时当你点击元素的时候，代码就会在事件处理器断住：")]),a._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"FkcpLTSpUtVETlthqBa_xI8iEV1h","data-src":"https://img.xiaoying.org.cn/img/20251004141210771.gif",loading:"lazy"}}),a._v("当然，因为 React 是合成事件，也就是事件绑定在某个元素上自己做的分发，所以这里是在源码处理事件的地方断住的。用 Vue 就可以直接在事件处理函数处断住。")]),a._v(" "),t("h2",{attrs:{id:"url-请求断点"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#url-请求断点"}},[a._v("#")]),a._v(" url 请求断点")]),a._v(" "),t("p",[a._v("当你想在某个请求发送的时候断住，但你不知道在哪里发的，这时候就可以用 url 请求断点")]),a._v(" "),t("p",[a._v("比如这样一段代码，你想在发送 url 包含 guang 的请求的时候断住，就可以使用 url 请求断点：")]),a._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"FpU_VnVxNS2cGPgIwBWZXC_IXTU5","data-src":"https://img.xiaoying.org.cn/img/20251004141208747.webp",loading:"lazy"}})]),a._v(" "),t("p",[a._v("不输入内容就是在任何请求处断住，你可以可以输入内容，那会在 url 包含该内容的请求处断住：")]),a._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"FmKtcucFuQfJ301dvhk-pgxIQ1Sm","data-src":"https://img.xiaoying.org.cn/img/20251004141216199.webp",loading:"lazy"}})]),a._v(" "),t("p",[a._v("效果如下：")]),a._v(" "),t("p",[t("img",{staticClass:"lazy",attrs:{alt:"FpbWMMszAtzn_bjxsV4QkwPP7-RH","data-src":"https://img.xiaoying.org.cn/img/20251004141220518.webp",loading:"lazy"}})]),a._v(" "),t("p",[a._v("这在调试网络请求的代码的时候，是很有用的。")]),a._v(" "),t("h2",{attrs:{id:"总结"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[a._v("#")]),a._v(" 总结")]),a._v(" "),t("p",[a._v("很多时候我们想打断点却不知道应该打在哪里，这时候就要用其他的断点类型了：")]),a._v(" "),t("ol",[t("li",[a._v("异常断点：在抛异常处断住")]),a._v(" "),t("li",[a._v("条件断点：在满足某个表达式的时候断住")]),a._v(" "),t("li",[a._v("日志点：打印日志但不断住，觉得断住太多次的时候可以用这个")]),a._v(" "),t("li",[a._v("DOM 断点：在 DOM 子树修改、属性修改、节点删除的时候断住")]),a._v(" "),t("li",[a._v("Event Listenter 断点：在某个事件发生的时候断住")]),a._v(" "),t("li",[a._v("url 请求断点：在发送 url 包含某内容的请求时断住")])]),a._v(" "),t("p",[a._v("加上普通断点，一共 7 种。这些类型的断点在特定场景下都是很有用的，灵活运用这些断点，能大幅提升调试效率。")])])}),[],!1,null,null,null);t.default=g.exports}}]);