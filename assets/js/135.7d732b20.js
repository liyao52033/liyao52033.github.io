(window.webpackJsonp=window.webpackJsonp||[]).push([[135],{648:function(s,a,t){"use strict";t.r(a);var n=t(4),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("将Java文件转换为Velocity模板需要进行以下几个方面的修改")]),s._v(" "),a("h2",{attrs:{id:"_1-文件扩展名"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-文件扩展名"}},[s._v("#")]),s._v(" 1. 文件扩展名")]),s._v(" "),a("p",[s._v("首先需要将文件扩展名从.java改为.java.vm，表示这是一个Velocity模板文件。")]),s._v(" "),a("h2",{attrs:{id:"_2-替换静态内容为动态变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-替换静态内容为动态变量"}},[s._v("#")]),s._v(" 2. 替换静态内容为动态变量")]),s._v(" "),a("p",[s._v("需要将Java文件中的静态内容替换为Velocity变量和指令。根据当前仓库中的模板，常用的Velocity变量有：")]),s._v(" "),a("ul",[a("li",[s._v("${packageName} - 包名的基础部分")]),s._v(" "),a("li",[s._v("${moduleName} - 模块名称")]),s._v(" "),a("li",[s._v("${subpackageName} - 子包名")]),s._v(" "),a("li",[s._v("${entityName} - 实体类名称")]),s._v(" "),a("li",[s._v("${lowerFirstEntityName} - 首字母小写的实体类名称")]),s._v(" "),a("li",[s._v("${businessName} - 业务名称")]),s._v(" "),a("li",[s._v("${author} - 作者名称")]),s._v(" "),a("li",[s._v("${date} - 日期")]),s._v(" "),a("li",[s._v("${tableName} - 数据库表名")]),s._v(" "),a("li",[s._v("${fieldConfigs} - 字段配置列表")])]),s._v(" "),a("h2",{attrs:{id:"_3-添加条件判断和循环"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-添加条件判断和循环"}},[s._v("#")]),s._v(" 3. 添加条件判断和循环")]),s._v(" "),a("p",[s._v("使用Velocity的条件判断和循环指令来处理动态内容：")]),s._v(" "),a("div",{staticClass:"language-velocity line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-velocity"}},[a("code",[a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("#if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("条件"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")])]),s._v("\n    // 条件成立时的内容\n"),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("#else")])]),s._v("\n    // 条件不成立时的内容\n"),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("#end")])]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("#foreach")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$item")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$collection")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")])]),s._v("\n    // 循环内容，可以使用"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$item")]),s._v("访问当前项\n"),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("#end")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h2",{attrs:{id:"_4-具体示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-具体示例"}},[s._v("#")]),s._v(" 4. 具体示例")]),s._v(" "),a("p",[s._v("以下是一个具体的转换示例")]),s._v(" "),a("h3",{attrs:{id:"原始java文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#原始java文件"}},[s._v("#")]),s._v(" 原始Java文件：")]),s._v(" "),a("div",{staticClass:"language-java line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("package")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("example"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("project"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("controller")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token import"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("example"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("project"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("entity"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("User")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token import"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("example"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("project"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("service"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserService")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token import"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("springframework"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("web"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("bind"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("annotation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RestController")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token import"}},[a("span",{pre:!0,attrs:{class:"token namespace"}},[s._v("org"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("springframework"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("web"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("bind"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("annotation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")])]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("RequestMapping")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@RestController")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[s._v("@RequestMapping")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/user"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserController")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserService")]),s._v(" userService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    \n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 其他代码")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("h3",{attrs:{id:"转换后的velocity模板"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#转换后的velocity模板"}},[s._v("#")]),s._v(" 转换后的Velocity模板：")]),s._v(" "),a("div",{staticClass:"language-velocity line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-velocity"}},[a("code",[s._v("package "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("packageName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),s._v("."),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("moduleName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),s._v(".controller;\n\nimport "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("packageName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),s._v("."),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("moduleName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),s._v(".model.entity."),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("entityName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),s._v(";\nimport "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("packageName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),s._v("."),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("moduleName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),s._v(".service."),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("entityName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),s._v('\nService;\nimport org.springframework.web.bind.annotation.RestController;\nimport org.springframework.web.bind.annotation.RequestMapping;\n\n@RestController\n@RequestMapping("/'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("lowerFirstEntityName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),s._v('")\npublic class '),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("entityName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),s._v("Controller {\n    \n    private "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("entityName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),s._v("Service "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("lowerFirstEntityName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),s._v("Service;\n    \n    // 其他代码\n}\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("h2",{attrs:{id:"_5-处理字段和属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-处理字段和属性"}},[s._v("#")]),s._v(" 5. 处理字段和属性")]),s._v(" "),a("p",[s._v("对于实体类中的字段和属性，需要使用#foreach循环遍历${fieldConfigs}，如当前仓库中的entity.java.vm模板所示：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('\n#foreach($fieldConfig in ${fieldConfigs})\n    #if(!$fieldConfig.fieldName.equals("id") && !$fieldConfig.\n    fieldName.equals("createTime") && !$fieldConfig.fieldName.\n    equals("updateTime")&& !$fieldConfig.fieldName.equals\n    ("isDelete"))\n        #if("$!fieldConfig.fieldComment" != "")\n    /**\n     * ${fieldConfig.fieldComment}\n     */\n        #end\n    private ${fieldConfig.fieldType} ${fieldConfig.fieldName};\n    #end\n#end\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("h2",{attrs:{id:"_6-条件导入"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-条件导入"}},[s._v("#")]),s._v(" 6. 条件导入")]),s._v(" "),a("p",[s._v("根据实体类的字段类型，可能需要条件导入某些包：")]),s._v(" "),a("div",{staticClass:"language-velocity line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-velocity"}},[a("code",[a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("#if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("hasLocalDateTime"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")])]),s._v("\nimport java.time.LocalDateTime;\n"),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("#end")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("#if")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("hasBigDecimal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")])]),s._v("\nimport java.math.BigDecimal;\n"),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("#end")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h2",{attrs:{id:"_7-注意事项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-注意事项"}},[s._v("#")]),s._v(" 7. 注意事项")]),s._v(" "),a("ol",[a("li",[s._v("Velocity变量使用${变量名}格式")]),s._v(" "),a("li",[s._v("Velocity指令使用#指令名格式")]),s._v(" "),a("li",[s._v("注意转义特殊字符，如$和#")]),s._v(" "),a("li",[s._v("使用$!{变量名}可以在变量为null时不输出任何内容")]),s._v(" "),a("li",[s._v("在模板中可以使用Velocity的内置函数，如$entityName.toLowerCase()")])])])}),[],!1,null,null,null);a.default=e.exports}}]);