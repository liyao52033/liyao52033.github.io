(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{514:function(s,t,a){},549:function(s,t,a){"use strict";a(514)},565:function(s,t,a){"use strict";a.r(t);a(73),a(1),a(16),a(209);var o={name:"Login",data:()=>({username:"",password:"",isLoading:!1,alert:{show:!1,message:"",type:"success"},modal:{show:!1,message:"",type:"error"}}),methods:{getHashParam(s){const t=window.location.hash.slice(1).split("&"),a={};return t.forEach(s=>{const[t,o]=s.split("=");a[t]=o}),a[s]||null},showAlert(s,t="error"){this.alert.message=s,this.alert.type=t,this.alert.show=!0,setTimeout(()=>{this.alert.show=!1},3e3)},showModal(s,t="error"){this.modal.message=s,this.modal.type=t,this.modal.show=!0},closeModal(){this.modal.show=!1},async login(){this.isLoading=!0;try{const s=await fetch("https://ssl.xiaoying.org.cn/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:this.username,password:this.password})}),t=await s.json();if(s.ok&&t.session){const s=localStorage.getItem("redirect")||"/";this.$router.push(s),localStorage.removeItem("redirect")}else this.showModal(t.error||"ç™»å½•å¤±è´¥ï¼Œè´¦å·æˆ–å¯†ç é”™è¯¯")}catch(s){this.showModal("ç™»å½•é”™è¯¯:",s)}finally{this.isLoading=!1}},async loginWithSocial(s){try{const t=await fetch("https://ssl.xiaoying.org.cn/socialLogin",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({provider:s})}),a=await t.json();t.ok&&a.url?window.location.href=a.url:this.showAlert(a.error||"ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•")}catch(t){this.showAlert("ç½‘ç»œé”™è¯¯ï¼Œè¯·æ£€æŸ¥è¿æ¥"),console.error(s+"ç™»å½•é”™è¯¯:",t)}}}},e=(a(549),a(3)),i=Object(e.a)(o,(function(){var s=this,t=s._self._c;return t("div",{staticClass:"login-container"},[t("div",{staticClass:"login-form"},[t("div",{staticClass:"login-header"},[t("h2",[s._v("æ¬¢è¿ç™»å½•")]),s._v(" "),t("Date")],1),s._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"input-group"},[t("span",{staticClass:"input-icon"},[s._v("ğŸ‘¤")]),s._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:s.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",name:"username",autocomplete:"off",placeholder:"è¯·è¾“å…¥è´¦å·"},domProps:{value:s.username},on:{input:function(t){t.target.composing||(s.username=t.target.value)}}})])]),s._v(" "),t("div",{staticClass:"form-row"},[t("div",{staticClass:"input-group"},[t("span",{staticClass:"input-icon"},[s._v("ğŸ”’")]),s._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:s.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",name:"password",autocomplete:"off",placeholder:"è¯·è¾“å…¥å¯†ç "},domProps:{value:s.password},on:{input:function(t){t.target.composing||(s.password=t.target.value)}}})])]),s._v(" "),t("div",{staticClass:"btn-row"},[t("button",{staticClass:"btn",attrs:{disabled:s.isLoading},on:{click:s.login}},[s._v("\n        "+s._s(s.isLoading?"ç™»å½•ä¸­...":"ç™»å½•")+"\n      ")])])]),s._v(" "),t("transition",{attrs:{name:"alert"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:s.alert.show,expression:"alert.show"}],staticClass:"custom-alert",class:s.alert.type},[t("div",{staticClass:"alert-content"},[t("span",{staticClass:"alert-icon"},[s._v(s._s("success"===s.alert.type?"âœ“":"!"))]),s._v("\n        "+s._s(s.alert.message)+"\n      ")])])]),s._v(" "),t("transition",{attrs:{name:"modal"}},[s.modal.show?t("div",{staticClass:"modal-overlay"},[t("div",{staticClass:"modal-container"},[t("div",{staticClass:"modal-content",class:s.modal.type},[t("div",{staticClass:"modal-icon"},[s._v(s._s("success"===s.modal.type?"âœ“":"!"))]),s._v(" "),t("div",{staticClass:"modal-message"},[s._v(s._s(s.modal.message))]),s._v(" "),t("button",{staticClass:"modal-button",on:{click:s.closeModal}},[s._v("ç¡® å®š")])])])]):s._e()])],1)}),[],!1,null,"2bf1228d",null);t.default=i.exports}}]);